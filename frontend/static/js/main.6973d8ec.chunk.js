(this["webpackJsonp@ping-board/frontend"]=this["webpackJsonp@ping-board/frontend"]||[]).push([[0],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledPing=void 0,t.isScheduledPing=function(e){return"string"===typeof e.scheduledFor&&"string"===typeof e.scheduledTitle}},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserRoles=void 0,function(e){e.EVENTS_READ="events.read",e.EVENTS_WRITE="events.write",e.PING="ping",e.PING_TEMPLATES_WRITE="ping.templates.write"}(t.UserRoles||(t.UserRoles={}))},106:function(e,t,n){},107:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(27),c=n.n(i),s=n(32),l=n(10),o=n(4),u=n(80),d=n(3),j=n(70),b=["neucoreGroup"],h=Object(j.createApi)({reducerPath:"loginApi",baseQuery:Object(j.fetchBaseQuery)({baseUrl:"/",credentials:"same-origin"}),tagTypes:["User","Event","Ping","PingTemplate","PingChannel","NeucoreGroup","PingViewPermission"],endpoints:function(e){return{getUser:e.query({query:function(){return"api/me"},providesTags:["User"]}),logOut:e.mutation({query:function(){return{url:"auth/logout",method:"POST"}},invalidatesTags:["User","Event"]}),getEvents:e.query({query:function(e){return{url:"api/events",params:e}},providesTags:function(e){return e&&e.events.length>0?e.events.map((function(e){return{type:"Event",id:e.id}})):["Event"]}}),addEvent:e.mutation({query:function(e){return{url:"api/events",method:"POST",body:e}},invalidatesTags:["Event"]}),updateEvent:e.mutation({query:function(e){var t=e.id,n=e.event;return{url:"api/events/".concat(t),method:"PUT",body:n}},invalidatesTags:["Event"]}),deleteEvent:e.mutation({query:function(e){return{url:"api/events/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return e?[{type:"Event",id:n}]:["Event"]}}),getPings:e.query({query:function(e){return{url:"api/pings",params:e||void 0}},providesTags:function(e){return e&&e.pings.length>0?e.pings.map((function(e){return{type:"Ping",id:e.id}})):["Ping"]}}),addPing:e.mutation({query:function(e){return{url:"api/pings",method:"POST",body:e}},invalidatesTags:function(e){return e?[{type:"Ping",id:e.id}]:["Ping"]}}),getPingChannels:e.query({query:function(){return{url:"api/pings/channels"}},providesTags:function(e){return e&&e.channels.length>0?e.channels.map((function(e){return{type:"PingChannel",id:e.id}})):["PingChannel"]}}),getAvailableNeucoreGroups:e.query({query:function(){return{url:"api/pings/neucore-groups"}},providesTags:function(e){return e&&e.neucoreGroups.length>0?e.neucoreGroups.map((function(e){return{type:"NeucoreGroup",id:e.id}})):["NeucoreGroup"]}}),getPingTemplates:e.query({query:function(){return{url:"api/pings/templates"}},providesTags:function(e){return e&&e.templates.length>0?e.templates.map((function(e){return{type:"PingTemplate",id:e.id}})):["PingTemplate"]}}),addPingTemplate:e.mutation({query:function(e){return{url:"api/pings/templates",method:"POST",body:e}},invalidatesTags:["PingTemplate"]}),updatePingTemplate:e.mutation({query:function(e){var t=e.id,n=e.template;return{url:"api/pings/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return e?[{type:"PingTemplate",id:e.id}]:["PingTemplate"]}}),deletePingTemplate:e.mutation({query:function(e){return{url:"api/pings/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return e?[{type:"PingTemplate",id:n}]:["PingTemplate"]}}),getPingViewPermissions:e.query({query:function(){return{url:"api/pings/view-permissions"}},providesTags:["PingViewPermission"]}),updatePingViewPermissionsByNeucoreGroup:e.mutation({query:function(e){var t=e.neucoreGroup,n=Object(d.a)(e,b);return{url:"api/pings/view-permissions/groups/".concat(t),method:"PUT",body:n}},invalidatesTags:["PingViewPermission","Ping"]})}}}),O=h.useGetUserQuery,f=h.useLogOutMutation,m=(h.useGetEventsQuery,h.useAddEventMutation),p=h.useUpdateEventMutation,x=h.useDeleteEventMutation,v=(h.useGetPingsQuery,h.useAddPingMutation),g=h.useGetPingChannelsQuery,y=h.useGetAvailableNeucoreGroupsQuery,N=h.useGetPingTemplatesQuery,w=h.useAddPingTemplateMutation,C=h.useUpdatePingTemplateMutation,k=h.useDeletePingTemplateMutation,S=h.useGetPingViewPermissionsQuery,T=h.useUpdatePingViewPermissionsByNeucoreGroupMutation,P=n(19),E=n.n(P),M=n(8),L=n(5),A=n(33),G=n(23),I=n(73),R=n(13),D=n.n(R),F=n(74),B=n.n(F),U=n(75),Y=n.n(U),q=n(76),z=n.n(q),V=n(77),H=n.n(V),J=n(78),Q=n.n(J),W=n(79),_=n.n(W);D.a.extend(B.a),D.a.extend(Y.a),D.a.extend(z.a),D.a.extend(H.a),D.a.extend(Q.a),D.a.extend(_.a);var K={af:function(){return n.e(3).then(n.t.bind(null,136,7))},am:function(){return n.e(4).then(n.t.bind(null,137,7))},"ar-dz":function(){return n.e(5).then(n.t.bind(null,138,7))},"ar-kw":function(){return n.e(6).then(n.t.bind(null,139,7))},"ar-ly":function(){return n.e(7).then(n.t.bind(null,140,7))},"ar-ma":function(){return n.e(8).then(n.t.bind(null,141,7))},"ar-sa":function(){return n.e(9).then(n.t.bind(null,142,7))},"ar-tn":function(){return n.e(10).then(n.t.bind(null,143,7))},ar:function(){return n.e(11).then(n.t.bind(null,144,7))},az:function(){return n.e(12).then(n.t.bind(null,145,7))},be:function(){return n.e(13).then(n.t.bind(null,146,7))},bg:function(){return n.e(14).then(n.t.bind(null,147,7))},bi:function(){return n.e(15).then(n.t.bind(null,148,7))},bm:function(){return n.e(16).then(n.t.bind(null,149,7))},bn:function(){return n.e(17).then(n.t.bind(null,150,7))},bo:function(){return n.e(18).then(n.t.bind(null,151,7))},br:function(){return n.e(19).then(n.t.bind(null,152,7))},bs:function(){return n.e(20).then(n.t.bind(null,153,7))},ca:function(){return n.e(21).then(n.t.bind(null,154,7))},cs:function(){return n.e(22).then(n.t.bind(null,155,7))},cv:function(){return n.e(23).then(n.t.bind(null,156,7))},cy:function(){return n.e(24).then(n.t.bind(null,157,7))},da:function(){return n.e(25).then(n.t.bind(null,158,7))},"de-at":function(){return n.e(26).then(n.t.bind(null,159,7))},"de-ch":function(){return n.e(27).then(n.t.bind(null,160,7))},de:function(){return n.e(28).then(n.t.bind(null,161,7))},dv:function(){return n.e(29).then(n.t.bind(null,162,7))},el:function(){return n.e(30).then(n.t.bind(null,163,7))},"en-au":function(){return n.e(31).then(n.t.bind(null,164,7))},"en-ca":function(){return n.e(32).then(n.t.bind(null,165,7))},"en-gb":function(){return n.e(33).then(n.t.bind(null,166,7))},"en-ie":function(){return n.e(34).then(n.t.bind(null,167,7))},"en-il":function(){return n.e(35).then(n.t.bind(null,168,7))},"en-in":function(){return n.e(36).then(n.t.bind(null,169,7))},"en-nz":function(){return n.e(37).then(n.t.bind(null,170,7))},"en-sg":function(){return n.e(38).then(n.t.bind(null,171,7))},"en-tt":function(){return n.e(39).then(n.t.bind(null,172,7))},en:function(){return n.e(40).then(n.t.bind(null,173,7))},eo:function(){return n.e(41).then(n.t.bind(null,174,7))},"es-do":function(){return n.e(42).then(n.t.bind(null,175,7))},"es-pr":function(){return n.e(43).then(n.t.bind(null,176,7))},"es-us":function(){return n.e(44).then(n.t.bind(null,177,7))},es:function(){return n.e(45).then(n.t.bind(null,178,7))},et:function(){return n.e(46).then(n.t.bind(null,179,7))},eu:function(){return n.e(47).then(n.t.bind(null,180,7))},fa:function(){return n.e(48).then(n.t.bind(null,181,7))},fi:function(){return n.e(49).then(n.t.bind(null,182,7))},fo:function(){return n.e(50).then(n.t.bind(null,183,7))},"fr-ca":function(){return n.e(51).then(n.t.bind(null,184,7))},"fr-ch":function(){return n.e(52).then(n.t.bind(null,185,7))},fr:function(){return n.e(53).then(n.t.bind(null,186,7))},fy:function(){return n.e(54).then(n.t.bind(null,187,7))},ga:function(){return n.e(55).then(n.t.bind(null,188,7))},gd:function(){return n.e(56).then(n.t.bind(null,189,7))},gl:function(){return n.e(57).then(n.t.bind(null,190,7))},"gom-latn":function(){return n.e(58).then(n.t.bind(null,191,7))},gu:function(){return n.e(59).then(n.t.bind(null,192,7))},he:function(){return n.e(60).then(n.t.bind(null,193,7))},hi:function(){return n.e(61).then(n.t.bind(null,194,7))},hr:function(){return n.e(62).then(n.t.bind(null,195,7))},ht:function(){return n.e(63).then(n.t.bind(null,196,7))},hu:function(){return n.e(64).then(n.t.bind(null,197,7))},"hy-am":function(){return n.e(65).then(n.t.bind(null,198,7))},id:function(){return n.e(66).then(n.t.bind(null,199,7))},is:function(){return n.e(67).then(n.t.bind(null,200,7))},"it-ch":function(){return n.e(68).then(n.t.bind(null,201,7))},it:function(){return n.e(69).then(n.t.bind(null,202,7))},ja:function(){return n.e(70).then(n.t.bind(null,203,7))},jv:function(){return n.e(71).then(n.t.bind(null,204,7))},ka:function(){return n.e(72).then(n.t.bind(null,205,7))},kk:function(){return n.e(73).then(n.t.bind(null,206,7))},km:function(){return n.e(74).then(n.t.bind(null,207,7))},kn:function(){return n.e(75).then(n.t.bind(null,208,7))},ko:function(){return n.e(76).then(n.t.bind(null,209,7))},ku:function(){return n.e(77).then(n.t.bind(null,210,7))},ky:function(){return n.e(78).then(n.t.bind(null,211,7))},lb:function(){return n.e(79).then(n.t.bind(null,212,7))},lo:function(){return n.e(80).then(n.t.bind(null,213,7))},lt:function(){return n.e(81).then(n.t.bind(null,214,7))},lv:function(){return n.e(82).then(n.t.bind(null,215,7))},me:function(){return n.e(83).then(n.t.bind(null,216,7))},mi:function(){return n.e(84).then(n.t.bind(null,217,7))},mk:function(){return n.e(85).then(n.t.bind(null,218,7))},ml:function(){return n.e(86).then(n.t.bind(null,219,7))},mn:function(){return n.e(87).then(n.t.bind(null,220,7))},mr:function(){return n.e(88).then(n.t.bind(null,221,7))},"ms-my":function(){return n.e(89).then(n.t.bind(null,222,7))},ms:function(){return n.e(90).then(n.t.bind(null,223,7))},mt:function(){return n.e(91).then(n.t.bind(null,224,7))},my:function(){return n.e(92).then(n.t.bind(null,225,7))},nb:function(){return n.e(93).then(n.t.bind(null,226,7))},ne:function(){return n.e(94).then(n.t.bind(null,227,7))},"nl-be":function(){return n.e(95).then(n.t.bind(null,228,7))},nl:function(){return n.e(96).then(n.t.bind(null,229,7))},nn:function(){return n.e(97).then(n.t.bind(null,230,7))},"oc-lnc":function(){return n.e(98).then(n.t.bind(null,231,7))},"pa-in":function(){return n.e(99).then(n.t.bind(null,232,7))},pl:function(){return n.e(100).then(n.t.bind(null,233,7))},"pt-br":function(){return n.e(101).then(n.t.bind(null,234,7))},pt:function(){return n.e(102).then(n.t.bind(null,235,7))},ro:function(){return n.e(103).then(n.t.bind(null,236,7))},ru:function(){return n.e(104).then(n.t.bind(null,237,7))},rw:function(){return n.e(105).then(n.t.bind(null,238,7))},sd:function(){return n.e(106).then(n.t.bind(null,239,7))},se:function(){return n.e(107).then(n.t.bind(null,240,7))},si:function(){return n.e(108).then(n.t.bind(null,241,7))},sk:function(){return n.e(109).then(n.t.bind(null,242,7))},sl:function(){return n.e(110).then(n.t.bind(null,243,7))},sq:function(){return n.e(111).then(n.t.bind(null,244,7))},"sr-cyrl":function(){return n.e(112).then(n.t.bind(null,245,7))},sr:function(){return n.e(113).then(n.t.bind(null,246,7))},ss:function(){return n.e(114).then(n.t.bind(null,247,7))},"sv-fi":function(){return n.e(115).then(n.t.bind(null,248,7))},sv:function(){return n.e(116).then(n.t.bind(null,249,7))},sw:function(){return n.e(117).then(n.t.bind(null,250,7))},ta:function(){return n.e(118).then(n.t.bind(null,251,7))},te:function(){return n.e(119).then(n.t.bind(null,252,7))},tet:function(){return n.e(120).then(n.t.bind(null,253,7))},tg:function(){return n.e(121).then(n.t.bind(null,254,7))},th:function(){return n.e(122).then(n.t.bind(null,255,7))},tk:function(){return n.e(123).then(n.t.bind(null,256,7))},"tl-ph":function(){return n.e(124).then(n.t.bind(null,257,7))},tlh:function(){return n.e(125).then(n.t.bind(null,258,7))},tr:function(){return n.e(126).then(n.t.bind(null,259,7))},tzl:function(){return n.e(127).then(n.t.bind(null,260,7))},"tzm-latn":function(){return n.e(128).then(n.t.bind(null,261,7))},tzm:function(){return n.e(129).then(n.t.bind(null,262,7))},"ug-cn":function(){return n.e(130).then(n.t.bind(null,263,7))},uk:function(){return n.e(131).then(n.t.bind(null,264,7))},ur:function(){return n.e(132).then(n.t.bind(null,265,7))},"uz-latn":function(){return n.e(133).then(n.t.bind(null,266,7))},uz:function(){return n.e(134).then(n.t.bind(null,267,7))},vi:function(){return n.e(135).then(n.t.bind(null,268,7))},"x-pseudo":function(){return n.e(136).then(n.t.bind(null,269,7))},yo:function(){return n.e(137).then(n.t.bind(null,270,7))},"zh-cn":function(){return n.e(138).then(n.t.bind(null,271,7))},"zh-hk":function(){return n.e(139).then(n.t.bind(null,272,7))},"zh-tw":function(){return n.e(140).then(n.t.bind(null,273,7))},zh:function(){return n.e(141).then(n.t.bind(null,274,7))}},X=new Set;function Z(){return(Z=Object(A.a)(E.a.mark((function e(){var t,n,a,r,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=Object(I.a)(null!==(t=navigator.languages)&&void 0!==t?t:[]),e.prev=2,i=E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.value,a=t.toLowerCase(),console.log("checking locale",a),!(a in K)){e.next=16;break}return e.prev=4,e.next=7,K[a]();case 7:return D.a.locale(a),console.log("loaded dayjs locale",a),n=!0,X.forEach((function(e){return e(a)})),e.abrupt("return","break");case 14:e.prev=14,e.t0=e.catch(4);case 16:case"end":return e.stop()}}),e,null,[[4,14]])})),a.s();case 5:if((r=a.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),a.e(e.t1);case 17:return e.prev=17,a.f(),e.finish(17);case 20:n||console.warn("failed to load dayjs locale, falling back to en");case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}(function(){return Z.apply(this,arguments)})().then();var $={loadingMonths:[],loadedMonths:[],events:[]},ee=function(e){return D.a.utc("".concat(e.year,"-").concat(e.month+1,"-01"))},te=function(e){return ee(e).format("YYYY-MM")};function ne(e){var t,n=ee(e),a=((n.day()-D.a.localeData().firstDayOfWeek())%(t=7)+t)%t,r=n.subtract(D.a.duration({days:a})),i=Math.ceil((r.daysInMonth()+a)/7),c=r.add(D.a.duration({weeks:i}));return{from:r,to:c,displayedWeeks:i}}var ae=Object(o.createAsyncThunk)("calendar/loadMonth",function(){var e=Object(A.a)(E.a.mark((function e(t){var n,a,r,i,c,s,l,o,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=Object(A.a)(E.a.mark((function e(t,n,i){var c,s,l,o,u,d,j;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],s=!0;case 2:if(!s){e.next=19;break}return o=new URLSearchParams({after:null!==(l=n(c))&&void 0!==l?l:a.toISOString(),before:r.toISOString()}),e.next=6,fetch("".concat(t,"?").concat(o.toString()),{credentials:"same-origin"});case 6:if(401!==(u=e.sent).status){e.next=11;break}s=!1,e.next=17;break;case 11:return e.next=13,u.json();case 13:d=e.sent,j=i(d),c=[].concat(Object(M.a)(c),Object(M.a)(j.values)),s=j.hasMore;case 17:e.next=2;break;case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e,t,n){return c.apply(this,arguments)},n=ne(t),a=n.from,r=n.to,e.next=5,Promise.all([i("/api/events",(function(e){return e.length>0?e[e.length-1].time:null}),(function(e){return{values:e.events,hasMore:e.remaining>0}})),i("/api/pings/scheduled",(function(e){return e.length>0?e[e.length-1].scheduledFor:null}),(function(e){return{values:e.pings,hasMore:e.remaining>0}}))]);case 5:return s=e.sent,l=Object(L.a)(s,2),o=l[0],u=l[1],e.abrupt("return",{cached:!1,events:o,pings:u});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{condition:function(e,t){var n=t.getState,a=te(e),r=n().calendar,i=r.loadingMonths,c=r.loadedMonths;return!i.includes(a)&&!c.includes(a)}}),re=Object(o.createSlice)({name:"calendar",initialState:$,reducers:{clearCalendarEntries:function(e){e.events=[],e.loadedMonths=[]}},extraReducers:function(e){return e.addCase(ae.pending,(function(e,t){e.loadingMonths.push(te(t.meta.arg))})).addCase(ae.rejected,(function(e,t){var n=te(t.meta.arg);e.loadingMonths=e.loadingMonths.filter((function(e){return e!==n}))})).addCase(ae.fulfilled,(function(e,t){var n=te(t.meta.arg);if(e.loadingMonths=e.loadingMonths.filter((function(e){return e!==n})),t.payload){var a=new Map([].concat(Object(M.a)(e.events.map((function(e){return"event"===e.baseEntry.type?["event-".concat(e.baseEntry.event.id),e]:["ping-".concat(e.baseEntry.ping.id),e]}))),Object(M.a)(t.payload.events.map((function(e){return["event-".concat(e.id),ie(e)]}))),Object(M.a)(t.payload.pings.map((function(e){return["ping-".concat(e.id),ce(e)]})))));e.events=Object(M.a)(a.values())}})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return $})).addMatcher(h.endpoints.addEvent.matchFulfilled,(function(e,t){e.events=[].concat(Object(M.a)(e.events),[ie(t.payload)])})).addMatcher(h.endpoints.updateEvent.matchFulfilled,(function(e,t){var n=t.payload;e.events=e.events.map((function(e){return"event"===e.baseEntry.type&&e.baseEntry.event.id===n.id?ie(n):e}))})).addMatcher(h.endpoints.deleteEvent.matchFulfilled,(function(e,t){var n=t.meta.arg.originalArgs;e.events=e.events.filter((function(e){return"event"!==e.baseEntry.type||e.baseEntry.event.id!==n}))})).addMatcher(h.endpoints.addPing.matchFulfilled,(function(e,t){Object(G.isScheduledPing)(t.payload)&&(e.events=[].concat(Object(M.a)(e.events),[ce(t.payload)]))}))}});function ie(e){var t;switch(e.priority.toLowerCase()){case"low":t="gray";break;case"medium":t="yellow";break;case"high":t="orange";break;case"critical":t="red"}var n=[e.standing.charAt(0).toUpperCase(),e.standing.substr(1)," ","other"===e.structure.toLowerCase()?"":e.structure+" ","other"===e.type.toLowerCase()?"":e.type.toLowerCase()+" ","timer in ",e.system].join("");return{dateTime:e.time,title:n,color:t,baseEntry:{type:"event",event:e}}}function ce(e){return{dateTime:e.scheduledFor,title:e.scheduledTitle,baseEntry:{type:"ping",ping:e}}}var se=function(e){return e.calendar.events},le=re.actions.clearCalendarEntries,oe=n(2),ue={loading:!1,events:[],hasMoreEvents:!0},de=Object(o.createAsyncThunk)("eventsList/reloadEvents",(function(e,t){var n=t.dispatch;n(xe()),n(je())})),je=Object(o.createAsyncThunk)("eventsList/loadMore",function(){var e=Object(A.a)(E.a.mark((function e(t,n){var a,r,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=Oe(a()),i=new URLSearchParams(Object(oe.a)(Object(oe.a)({},r.length>0?{before:r[r.length-1].time}:{}),{},{count:"40"})),c=fetch("/api/events?".concat(i.toString()),{credentials:"same-origin"}),e.next=6,c.then((function(e){return e.json()}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().eventsList.loading}});function be(e){return Object(M.a)(e).sort((function(e,t){return Date.parse(t.time)-Date.parse(e.time)}))}var he=Object(o.createSlice)({name:"eventsList",initialState:ue,reducers:{clearEvents:function(e){e.loading=!1,e.events=[],e.hasMoreEvents=!0},eventsReceived:function(e,t){e.loading=!1,e.events=[].concat(Object(M.a)(e.events),Object(M.a)(t.payload.events)),e.hasMoreEvents=t.payload.remaining>0}},extraReducers:function(e){return e.addCase(je.pending,(function(e){e.loading=!0})).addCase(je.fulfilled,(function(e,t){e.loading=!1,e.events=be([].concat(Object(M.a)(e.events),Object(M.a)(t.payload.events))),e.hasMoreEvents=t.payload.remaining>0})).addCase(je.rejected,(function(e){e.loading=!1})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return ue})).addMatcher(h.endpoints.addEvent.matchFulfilled,(function(e,t){e.events=be([].concat(Object(M.a)(e.events),[t.payload]))})).addMatcher(h.endpoints.updateEvent.matchFulfilled,(function(e,t){var n=t.payload;e.events=be(e.events.map((function(e){return e.id===n.id?n:e})))})).addMatcher(h.endpoints.deleteEvent.matchFulfilled,(function(e,t){var n=t.meta.arg.originalArgs;e.events=e.events.filter((function(e){return e.id!==n}))}))}}),Oe=function(e){return e.eventsList.events},fe=function(e){return e.eventsList.hasMoreEvents},me=function(e){return e.eventsList.loading},pe=he.actions,xe=pe.clearEvents,ve=(pe.eventsReceived,{loading:!1,pings:[],hasMore:!0}),ge=Object(o.createAsyncThunk)("pingsList/reloadPings",(function(e,t){var n=t.dispatch;n(Ee()),n(ye())})),ye=Object(o.createAsyncThunk)("pingsList/loadMore",function(){var e=Object(A.a)(E.a.mark((function e(t,n){var a,r,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=ke(a()),i=new URLSearchParams(r.length>0?{before:r[r.length-1].sentAt}:{}),c=fetch("/api/pings?".concat(i.toString()),{credentials:"same-origin"}),e.next=6,c.then((function(e){return e.json()}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().pingsList.loading}});function Ne(e){return Object(M.a)(e).sort((function(e,t){return Date.parse(t.sentAt)-Date.parse(e.sentAt)}))}var we,Ce=Object(o.createSlice)({name:"pingsList",initialState:ve,reducers:{clearPings:function(e){e.loading=!1,e.pings=[],e.hasMore=!0},pingsReceived:function(e,t){e.loading=!1,e.pings=[].concat(Object(M.a)(e.pings),Object(M.a)(t.payload.pings)),e.hasMore=t.payload.remaining>0}},extraReducers:function(e){return e.addCase(ye.pending,(function(e){e.loading=!0})).addCase(ye.fulfilled,(function(e,t){e.loading=!1,e.pings=Ne([].concat(Object(M.a)(e.pings),Object(M.a)(t.payload.pings))),e.hasMore=t.payload.remaining>0})).addCase(ye.rejected,(function(e){e.loading=!1})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return ve})).addMatcher(h.endpoints.addPing.matchFulfilled,(function(e,t){e.pings=Ne([].concat(Object(M.a)(e.pings),[t.payload]))}))}}),ke=function(e){return e.pingsList.pings},Se=function(e){return e.pingsList.hasMore},Te=function(e){return e.pingsList.loading},Pe=Ce.actions,Ee=Pe.clearPings,Me=(Pe.pingsReceived,Object(o.configureStore)({reducer:(we={},Object(l.a)(we,h.reducerPath,h.reducer),Object(l.a)(we,re.name,re.reducer),Object(l.a)(we,he.name,he.reducer),Object(l.a)(we,Ce.name,Ce.reducer),we),middleware:function(e){return e().concat(h.middleware)}}));Object(u.setupListeners)(Me.dispatch);n(105),n(106),n(107);var Le=n(133),Ae=n(125),Ge=n(134),Ie=n(126),Re=n(12),De=n(0);function Fe(e){var t,n=Object(Re.h)(),a=function(e){return function(t){t.preventDefault(),n.push(e)}},r=O(void 0,{pollingInterval:6e4}),i=f(),c=Object(L.a)(i,2),s=c[0],l=c[1].isLoading,o=r.isFetching||l;return Object(De.jsx)(Le.a,{variant:"dark",bg:"primary",expand:"md",children:Object(De.jsxs)(Ae.a,{fluid:!0,children:[Object(De.jsx)(Le.a.Brand,{href:"/",children:"Brave Collective Pingboard"}),Object(De.jsx)(Le.a.Toggle,{"aria-controls":"navbar-nav"}),Object(De.jsxs)(Le.a.Collapse,{id:"navbar-nav",className:"justify-content-end",children:[Object(De.jsx)(Ge.a,{variant:"pills",className:"me-auto",children:e.pages.map((function(e){return Object(De.jsx)(Ge.a.Link,{onClick:a(e.href),href:e.href,children:e.title},e.title)}))}),o?Object(De.jsx)(Le.a.Text,{children:"Loading\u2026"}):(null===(t=r.data)||void 0===t?void 0:t.isLoggedIn)?Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Le.a.Text,{children:r.data.character.name}),Object(De.jsx)(Ie.a,{onClick:function(){return s()},children:"Log Out"})]}):Object(De.jsx)(Ie.a,{onClick:a("/login"),href:"/login",children:"Log In"})]})]})})}var Be=n(17),Ue=function(){return Object(s.useDispatch)()},Ye=s.useSelector,qe=n(16);function ze(e){var t=e.time,n=e.format,a=void 0===n?"llll":n,r=e.asLink,i=void 0!==r&&r,c=e.className,s=D()(t);if(i){var l="https://time.nakamura-labs.com/#".concat(s.unix());return Object(De.jsx)("a",{className:c,href:l,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:s.format(a)})}return Object(De.jsx)("span",{className:c,children:s.format(a)})}var Ve=n(131),He=n(127),Je=n(83);function Qe(e){var t="https://evemaps.dotlan.net/map/".concat(e.region,"/").concat(e.constellation);return Object(De.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.constellation})}function We(e){var t="https://evemaps.dotlan.net/map/".concat(e.region)+(e.system?"/".concat(e.system):"");return Object(De.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.region})}function _e(e){var t=e.time,n=Object(a.useState)(D()(t).fromNow()),r=Object(L.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){var e=setInterval((function(){c(D()(t).fromNow())}),1e3);return function(){return clearInterval(e)}}),[t]),Object(De.jsx)("span",{children:i})}var Ke=[{regex:/\n/g,onMatch:function(e){return Object(De.jsx)("br",{})}},{regex:/\[([^\]]+\]\([^)]+)\)>/g,onMatch:function(e){var t=e.indexOf("]("),n=e.substring(0,t),a=e.substring(t+2);return Object(De.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:a})}},{regex:/<([^|]+\|[^>]+)>/g,onMatch:function(e){var t=e.indexOf("|"),n=e.substring(0,t),a=e.substring(t+1);return Object(De.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:a})}},{regex:/\*([^*]+)\*/g,onMatch:function(e){return Object(De.jsx)("b",{children:e})}},{regex:/_([^*]+)_/g,onMatch:function(e){return Object(De.jsx)("i",{children:e})}},{regex:/~([^~]+)~/g,onMatch:function(e){return Object(De.jsx)("s",{children:e})}}];function Xe(e){var t=e.text,n=Ke.reduce((function(e,t){var n=t.regex,a=t.onMatch;return e.flatMap((function(e){if("string"!==typeof e)return[e];var t=[];return e.replace(n,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.length>3?n.slice(1,n.length-2):[];return t.push(a.apply(void 0,Object(M.a)(i))),"\0"})).split("\0").flatMap((function(e,n){return[e].concat(Object(M.a)(t[n]?[t[n]]:[]))}))}))}),[t]);return Object(De.jsx)(De.Fragment,{children:n.map((function(e,t){return Object(De.jsx)(r.a.Fragment,{children:e},t)}))})}function Ze(e){var t="https://evemaps.dotlan.net/system/".concat(e.system);return Object(De.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.system})}var $e=["entry"];function et(e){var t,n,a=e.entry,r=Object(d.a)(e,$e);return Object(De.jsxs)(Ve.a,Object(oe.a)(Object(oe.a)({},r),{},{children:[Object(De.jsx)(Ve.a.Header,{closeButton:!0,children:Object(De.jsxs)(Ve.a.Title,{children:[Object(De.jsx)("i",{className:{event:"bi-stopwatch",ping:"bi-broadcast-pin"}[null!==(t=null===a||void 0===a?void 0:a.baseEntry.type)&&void 0!==t?t:"event"]})," ",null===a||void 0===a?void 0:a.title,Object(De.jsx)("h6",{className:"m-0",children:{event:"Timerboard Event",ping:"Ping"}[null!==(n=null===a||void 0===a?void 0:a.baseEntry.type)&&void 0!==n?n:"event"]})]})}),Object(De.jsxs)(Ve.a.Body,{children:["event"===(null===a||void 0===a?void 0:a.baseEntry.type)&&Object(De.jsx)(tt,{event:a.baseEntry.event}),"ping"===(null===a||void 0===a?void 0:a.baseEntry.type)&&Object(De.jsx)(nt,{ping:a.baseEntry.ping})]})]}))}function tt(e){var t=e.event;return Object(De.jsxs)(He.a,{className:"mt-n2",children:[Object(De.jsx)(Je.a,{xs:3,children:"EVE Time"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(ze,{time:D.a.utc(t.time),asLink:!0,format:"YYYY-MM-DD HH:mm"})}),Object(De.jsx)(Je.a,{xs:3,children:"Local Time"}),Object(De.jsxs)(Je.a,{xs:9,children:[Object(De.jsx)(ze,{time:t.time})," (",Object(De.jsx)(_e,{time:t.time}),")"]}),Object(De.jsx)(Je.a,{xs:3,children:"Priority"}),Object(De.jsx)(Je.a,{xs:9,children:t.priority}),Object(De.jsx)("hr",{className:"my-1"}),Object(De.jsx)(Je.a,{xs:3,children:"System"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(Ze,{system:t.system})}),Object(De.jsx)(Je.a,{xs:3,children:"Constellation"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(Qe,{constellation:t.constellation,region:t.region})}),Object(De.jsx)(Je.a,{xs:3,children:"Region"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(We,{region:t.region,system:t.system})}),Object(De.jsx)("hr",{className:"my-1"}),t.result&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Je.a,{xs:3,children:"Result"}),Object(De.jsx)(Je.a,{xs:9,children:t.result})]}),Object(De.jsx)(Je.a,{xs:3,children:"Standing"}),Object(De.jsx)(Je.a,{xs:9,children:t.standing}),Object(De.jsx)(Je.a,{xs:3,children:"Type"}),Object(De.jsx)(Je.a,{xs:9,children:t.type}),Object(De.jsx)(Je.a,{xs:3,children:"Structure"}),Object(De.jsx)(Je.a,{xs:9,children:t.structure}),t.notes&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Je.a,{xs:3,children:"Notes"}),Object(De.jsx)(Je.a,{xs:9,children:t.notes.split("\n").map((function(e){return Object(De.jsxs)(De.Fragment,{children:[e,Object(De.jsx)("br",{})]})}))})]})]})}function nt(e){var t=e.ping;return Object(De.jsxs)(He.a,{className:"mt-n2",children:[Object(De.jsx)(Je.a,{xs:3,children:"EVE Time"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(ze,{time:D.a.utc(t.scheduledFor),asLink:!0,format:"YYYY-MM-DD HH:mm"})}),Object(De.jsx)(Je.a,{xs:3,children:"Local Time"}),Object(De.jsxs)(Je.a,{xs:9,children:[Object(De.jsx)(ze,{time:t.scheduledFor})," (",Object(De.jsx)(_e,{time:t.scheduledFor}),")"]}),Object(De.jsx)(Je.a,{xs:3,children:"Channel"}),Object(De.jsx)(Je.a,{xs:9,children:t.slackChannelName}),Object(De.jsx)(Je.a,{xs:3,children:"Sent By"}),Object(De.jsx)(Je.a,{xs:9,children:t.author}),Object(De.jsx)("hr",{className:"my-1"}),Object(De.jsx)(Je.a,{xs:3,children:"Ping Text"}),Object(De.jsx)(Je.a,{xs:9,children:Object(De.jsx)(Xe,{text:t.text})})]})}n(112);function at(e){var t=e.year,n=e.month,r=e.events,i=e.className,c=ne({year:t,month:n}),s=c.from,l=c.displayedWeeks,o=Object(a.useState)(!1),u=Object(L.a)(o,2),d=u[0],j=u[1],b=Object(a.useState)(null),h=Object(L.a)(b,2),O=h[0],f=h[1],m=Object(M.a)(new Array(l)).map((function(e,t){return{week:s.add(7*t,"days").week(),days:Object(M.a)(new Array(7)).map((function(e,n){var a=s.add(7*t+n,"days"),i=a.valueOf(),c=a.add(1,"days").valueOf(),l=a.format("YYYY-MM-DD")===D.a.utc().format("YYYY-MM-DD");return{date:a,isToday:l,events:r.filter((function(e){var t=D.a.utc(e.dateTime).valueOf();return t>=i&&t<c})).sort((function(e,t){return D.a.utc(e.dateTime).valueOf()-D.a.utc(t.dateTime).valueOf()}))}}))}}));return function(){var e=Object(a.useState)(D.a.locale()),t=Object(L.a)(e,2),n=t[0],r=t[1];X.add(r),Object(a.useEffect)((function(){return function(){X.delete(r)}}),[])}(),Object(De.jsxs)("div",{className:Object(qe.a)("d-flex","flex-column","bg-dark",i),children:[m.map((function(e,t){return Object(De.jsxs)("div",{className:Object(qe.a)("flex-fill position-relative d-flex flex-grow-1",t>0&&"border-top"),children:[Object(De.jsx)("div",{className:"py-1 mx-1",style:{width:28},children:Object(De.jsx)("div",{className:"h-100 rounded-1 px-1 text-center",style:{background:"var(--bs-gray-700)"},children:e.days[0].date.week()})}),e.days.map((function(e,a){return Object(De.jsxs)("div",{"aria-hidden":!0,className:Object(qe.a)("calendar-day","flex-grow-1","overflow-hidden",a>0&&"border-start",e.date.month()!==n&&"text-muted"),style:{flexBasis:0},children:[0===t&&Object(De.jsx)("div",{className:"px-1 text-center text-white",children:e.date.format("dddd")}),Object(De.jsx)("div",{className:Object(qe.a)("day",e.isToday&&"today"),children:Object(De.jsx)("span",{children:e.date.date()})}),e.events.map((function(e,t){var n;return Object(De.jsxs)("div",{className:Object(qe.a)("calendar-event",null!==(n=e.color)&&void 0!==n?n:"cyan"),onClick:function(){return t=e,j(!0),void f(t);var t},children:[Object(De.jsx)(ze,{time:D.a.utc(e.dateTime),asLink:!0,format:"HH:mm",className:"me-1"}),Object(De.jsxs)("span",{children:[Object(De.jsx)("i",{className:{event:"bi-stopwatch",ping:"bi-broadcast-pin"}[e.baseEntry.type]})," ",e.title]})]},t)}))]},e.date.date())}))]},t)})),Object(De.jsx)(et,{entry:O,show:d,onHide:function(){j(!1)},fullscreen:"sm-down"})]})}function rt(){var e,t=Ue(),n=O(),r=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&(n.data.character.roles.includes(G.UserRoles.EVENTS_READ)||n.data.character.roles.includes(G.UserRoles.PING)),i=Ye(se),c=Object(a.useState)(D.a.utc()),s=Object(L.a)(c,2),l=s[0],o=s[1],u=l.month(),d=l.year();Object(a.useEffect)((function(){t(ae({month:u,year:d}))}),[t,u,d]);var j=Object(Re.j)().url;if(!n.isFetching){var b;if(!(null===(b=n.data)||void 0===b?void 0:b.isLoggedIn))return Object(De.jsx)(Re.b,{to:"/login?postLoginRedirect=".concat(j)});if(!r)return Object(De.jsx)(Ae.a,{fluid:!0,children:Object(De.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(De.jsxs)(Ae.a,{fluid:!0,className:"h-100 d-flex flex-column",children:[Object(De.jsx)("h3",{className:"mt-n1 pt-3",children:"Calendar"}),Object(De.jsxs)("div",{className:"d-flex mb-2",children:[Object(De.jsx)(Ie.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o(D.a.utc())},children:"Today"}),Object(De.jsx)(Ie.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o((function(e){return e.subtract(D.a.duration({months:1}))}))},children:Object(De.jsx)("i",{className:"bi-chevron-left"})}),Object(De.jsx)(Ie.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o((function(e){return e.add(D.a.duration({months:1}))}))},children:Object(De.jsx)("i",{className:"bi-chevron-right"})}),Object(De.jsx)("h4",{className:"h-100 mb-0 me-2 align-middle",children:l.format("MMMM YYYY")}),Object(De.jsxs)(Ie.a,{size:"sm",variant:"outline-light",onClick:function(){t(le()),t(ae({month:u,year:d}))},children:[Object(De.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]})]}),Object(De.jsx)(at,{className:"flex-fill mb-2",year:l.year(),month:l.month(),events:i})]})}var it=n.p+"static/media/brave-logo.070fd9e9.svg";n(113);function ct(){var e,t=O(),n=Object(Re.i)();if(null===(e=t.data)||void 0===e?void 0:e.isLoggedIn)return Object(De.jsx)(Re.b,{to:"/"});var a=new URLSearchParams(n.search).get("postLoginRedirect"),r="/auth/login"+(a?"?".concat(new URLSearchParams({postLoginRedirect:a})):"");return Object(De.jsxs)(Ae.a,{className:"login-container",children:[Object(De.jsx)("div",{style:{flex:"33%"}}),Object(De.jsxs)(He.a,{className:"jumbotron",style:{justifyContent:"center"},children:[Object(De.jsxs)(Je.a,{sm:7,children:[Object(De.jsx)("h1",{children:"Brave Collective PingBoard"}),Object(De.jsx)("hr",{}),Object(De.jsx)("p",{children:"Log in with your EVE Online Account to gain access."}),Object(De.jsx)("p",{children:Object(De.jsx)("a",{href:r,children:Object(De.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAAtCAQAAAD1900CAAAIy0lEQVR42u2ca2wcVxXHf7NeUqF2pxRViLKbVhXQeDYIaD7sOlABEXZAiEfkqGoIqpKCUpJSO03tiqeCIiREiCBxohYoSu0UQZGSOOUl0iSEhwR+fCkt9S5IgKBeoyCMGk+CHGi8lw/3zu68d9be9e7E+a+0O3Pm3HPPOffccx8zs9raBF9fNdDBdawECLTQcwvzVxlkSFv71Ts/fzui1VpHgkaCckx0jTeS/JmXt2rvFG/ln63WJSJeyxrO8/pWq7ECoPEGCn9PJrjQak0iQ2aN5cocWlvlqOXVRjALdyTayQG1oNVJXxrayzPLrc0CkCi32uq64K9tMx3XnMCLA8ok2yt5hkOw/Mk+Pt5pNDQSrVbhOtoXyTj1DUF5EZkjTrlx8WiGlUkRI9eJRa1W4mPfUtB4K0XcModYIXmgPZAMWgEsBc1qwDJltCbo2/6Wt8ISSDRjqdY8B7X7INje2tVrS1LEaiUvSMRK3/hCo0nDSrMgt8/jo2/ckQxLhBMRBPyGx3iIbQDs5HlfnnV8C4BjPMEB3hNBah54BzkmecFBvx4YywfRmE2wEWYBeNRXXIIBAGYZrktqmr+iOyhl4jUIxh1JeYvFjeizbsECl3icLwN38RFGPRwf4y0APM5lok7ZFoBpdEyHdoIFNF99JdJ0A+eYsdFydJMBJjiFqWi95NAxmXRp20uKS4ySwwCKTAI5DC75WOWGQR/wkIO2zaONpZNhOzuHTq7CadmQJ2XjOeYq77XJiV5SFJmkD4NzEbT3QiNwWLFTv8OvQ4RcBuBn3EsW2MUZRbGQUg4r8FMbtchXaqr3ex+tRGjuSNMHFG3N0csXbA79DCbQpwZB6CblcHs3OSYZVQ1d5H5ko09GcG+KnDp6ghxHOAYebSxI+VVfSE4Zgt30AaforsgDZ3D42eRGNzmOMIlBLtLkwA+CpAgZxweU8rWf+ChzgGHgFnbwDceVHbwOgAOqxx/lx8Ar/HER6i7U2OcQ6rvK8TBwls9i8H0MNjGCwTbgMCPsp4dtjqFOqNJSjsFtzFRotVBgF3JO5CzhV1bKP6zOplX43EQZ6ASKXEQAM5ys+LcKr03+nhCUGUKntKiZmibvygbjHwDczM0hPJeVaS9wmg8CWzjJ3ypX7+Q+AH5emVi+wqsArAlV7U8B9PrMzKMDo0CRCfLkGSEPwAgwSg86aZ+ebaHH43iDvCrdi47JKLAdOAsYwATbyQB5dQ10+jGYYdhTj122pR1kkLkEoOTT8H429aJTJE0PJqOOTGGgAzO+HNvJAxOMBgxNifDVyjMRGuBXPKqOhtjADXQwyMOVq4N0AFcqvQQGeF8Eqet8qfXuPxrK8Zb7DUUrKsq6kLIzpNns0zj9wFlm+BKoAJCUDP3ACP2AXG3J4PiimlSn2RVSW1FpJ/Ur1GlTD3lMVU+ej9oau4c8h5nw4dhPjzrLB2gmSFgjud8nGizuCypFv4t3K8o9rAdgmAuLlOn8lNVd2XCN3fpXj3UEOmCG2it/SxRJ0+nSp6AaOq3kpckBJqVK3TspAicZUpST3M1hIO+pZ7v6WHL1yryloHjSiqO3hk0yvN7LVkCn02UJPhyd9ABb2Qrk6QzwRnLpT3NXyw+ziTcCg4zzKq9hEIALjDToTqpggbD1TjU4JMoOqtNdm9kIwJCnn1rlz2CwmZJLH9lbBWCi8ybSQNEWmOM8AJQqUscRTLlkyKN+dfYUVq7oxADMStmM4pnghMdG9/c4c8w59Hf/2jnkgFLAGtD8clWNu7L3RGjGq7byVzjIfuAOtvA0H+d2AL7JFRv/50hGkBocHFGyj8WheWRZN/0Fupp9pFyNVnXpCXbTwzA46hwnT4osMMxusoomHBKctbr7sYUhG32aEhmypLHyhgBKakJqesp6bXLWKAJ+7TD4NtYw5e/T0Oc5NgDwPC/XbA4Lp9nC3cCn+R0PqtLPOWp4G7cBs/w2sswqyq6hyT0HcWeOoF4GgqMc5UXwCTaLMscZNqqRucozDWQpAc+xW034pj3u9xsA3OFy1GFFgQwGGeyhVqrweG30frvrDvp12lwA5nxjQJAMm//LvYgfMOlzzWqYf/EHh8D9PIPGTTzNjYDga66KP8EG4C/cQBjOB9BFyJkXckjIUEKuAkpAgS7V32tjnI0e3gKQRc4zTDLohE8ga0MouRvJkK0pTdq0mmmbTYtDQXXfINRYykrIaUsQfsluV5U/YhNwIwDPVpZlTryZQ6F1vj1Q4Xq2z6XjujgBdCHdbgI6XYzTVbP8Gfb6yDRVeRloUFpCA9n9hgrEKMGRZ9pmU/2QXgD4IVkeZNyHR3Pfla3/YRXvJs8helRo/IdDnqvR5JcDqAuhG1JS9pPq7CBHGWM9j5AiSwY4TpnTPALs5Tif8uhv3wQTlLnIce712DjFemCKMlN0qSOrbuvok6Q4WJFfvWbX80WbnjCmzgpcrPB0VXh2VK6/5GOTd9tNBPxaHKfZS5YHkAH5ko9PNSARlqgvR/jMe8TOVprnSf7tuTofSWoQgu+r+GOAMXT28AFM9jEGlNgHZNiDyfGa5ccDaSZWL3b33ROY6JGHrqrnZfOP1eT02iTL1wOTfZjsYQ+wL2ATTKCtEY1/O2EVP2E103xY7YY2CkluZc4nHMOxmgxOp+usJUoztBLhOdxrU/2QXpgKCA2N+eYEB7yfI/TxiwZL7eBWLvLfJugbHdfOU6K17JynYe/KOieK5znU8NCAxT/s07inQNohNJbnmRaBdpeIz+MzHdzCpRZnjnoR10yjcSVur0PWt5RdLoTpFLfQsNsSq79gkG+utB/i5UOJoIC27+PG7o23dn9zJS6I4sWYBcfVFRUcrZ6vxCw4yivqD+NabWms3rIvR7xlHye078sWDXpvZTkVrncDPUhOu6BdQwNiOKw0St/4WN06xOoP40Sb7nPUb0ccUCb5v+9p99f6c+vmjIuLk3ptTEjb3wYBj2mrV3FK+1Djla1vGdbqRdu1j7o9/F12/h8TB8xJk2exoQAAAABJRU5ErkJggg==",alt:"LOG IN with EVE Online"})})}),Object(De.jsxs)("p",{children:["You first need a"," ",Object(De.jsx)("a",{href:"https://account.bravecollective.com/",target:"_blank",rel:"noreferrer",children:"BRAVE Core Service Account"})," ","to log in here."]})]}),Object(De.jsx)(Je.a,{sm:5,children:Object(De.jsx)("img",{src:it,alt:"Logo",className:"img-fluid"})})]}),Object(De.jsx)("div",{style:{flex:"66%"}})]})}var st=n(128),lt=n(132),ot=n(129);n(114);function ut(e){var t,n,r,i,c,s,o=e.show,u=e.template,d=e.onSave,j=e.onCancel,b=e.onDelete,h=Object(a.useState)({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1}),O=Object(L.a)(h,2),f=O[0],m=O[1];Object(a.useEffect)((function(){return m(u?Object(oe.a)({},u):{name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1})}),[u]);var p=f.name.length>0&&f.slackChannelId.length>0,x=g(),v=y(),N=(null!==(t=null===(n=v.data)||void 0===n?void 0:n.neucoreGroups)&&void 0!==t?t:[]).filter((function(e){return!f.allowedNeucoreGroups.includes(e.name)})),w="number"!==typeof(null===u||void 0===u?void 0:u.id),C=!w&&["Last edited by ".concat(null!==(r=null===u||void 0===u?void 0:u.updatedBy)&&void 0!==r?r:"unknown"),(null===u||void 0===u?void 0:u.updatedAt)?"at ".concat(D()(u.updatedAt).format("llll")," (").concat(D()(u.updatedAt).fromNow(),")"):"unknown"].join(" "),k=function(e,t){m((function(n){return Object(oe.a)(Object(oe.a)({},n),{},Object(l.a)({},e,t))}))},S=Object(a.useState)(!1),T=Object(L.a)(S,2),P=T[0],E=T[1];return Object(De.jsxs)(Ve.a,{show:o,size:"lg",backdrop:"static",children:[Object(De.jsx)(Ve.a.Header,{children:Object(De.jsxs)(Ve.a.Title,{children:[w?"Add":"Edit"," Ping Template"]})}),Object(De.jsx)(Ve.a.Body,{children:Object(De.jsx)(lt.a,{children:Object(De.jsxs)(He.a,{children:[C&&Object(De.jsx)(Je.a,{xs:12,className:"mb-3",children:C}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"name",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Template Name"}),Object(De.jsx)(lt.a.Control,{type:"text",value:f.name,onChange:function(e){return k("name",e.target.value)}})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"slackChannel",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Targeted Slack Channel"}),Object(De.jsxs)(lt.a.Select,{value:f.slackChannelId,onChange:function(e){return m((function(t){return Object(oe.a)(Object(oe.a)({},t),{},{slackChannelId:e.target.value})}))},children:[x.isLoading&&Object(De.jsx)("option",{value:"",children:"Loading\u2026"}),!x.isLoading&&((null!==(i=null===(c=x.data)||void 0===c?void 0:c.channels.length)&&void 0!==i?i:0)<1?Object(De.jsx)("option",{value:"",children:"No valid target channels!"}):Object(De.jsx)("option",{value:"",children:"(Please Select)"})),!x.isLoading&&(null===(s=x.data)||void 0===s?void 0:s.channels.map((function(e){return Object(De.jsx)("option",{value:e.id,children:e.name},e.id)})))]})]}),Object(De.jsx)(lt.a.Group,{as:Je.a,controlId:"allowScheduling",xs:12,className:"mb-3",children:Object(De.jsx)(lt.a.Check,{checked:!!f.allowScheduling,onChange:function(){return k("allowScheduling",!f.allowScheduling)},label:Object(De.jsxs)(De.Fragment,{children:["Allow Showing the Ping in the Calendar",Object(De.jsx)("span",{className:"d-block",style:{fontSize:"0.9rem"},children:"Only users with permissions to view pings sent to the target channel will be able to see them in the calendar."})]})})}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"addNeucoreGroup",xs:12,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Neucore Groups Allowed to Ping"}),Object(De.jsxs)(st.a,{variant:"dark",children:[Object(De.jsx)("thead",{children:Object(De.jsxs)("tr",{children:[Object(De.jsx)("th",{style:{width:"100%"},children:"Group"}),Object(De.jsx)("th",{children:"Action"})]})}),Object(De.jsxs)("tbody",{children:[0===f.allowedNeucoreGroups.length&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:Object(De.jsxs)(ot.a,{variant:"warning",className:"mb-0 p-1",children:[Object(De.jsx)("i",{className:"bi-exclamation-triangle"})," ","All users allowed to ping can use this template"]})})}),f.allowedNeucoreGroups.map((function(e){return Object(De.jsxs)("tr",{children:[Object(De.jsx)("td",{className:"align-middle",children:e}),Object(De.jsx)("td",{children:Object(De.jsxs)(Ie.a,{size:"sm",onClick:function(){return t=e,m((function(e){return Object(oe.a)(Object(oe.a)({},e),{},{allowedNeucoreGroups:e.allowedNeucoreGroups.filter((function(e){return e!==t}))})}));var t},className:"text-nowrap",children:[Object(De.jsx)("i",{className:"bi-trash-fill"})," Remove"]})})]},e)})),v.isLoading&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:"Loading\u2026"})}),!v.isLoading&&N.length<1&&f.allowedNeucoreGroups.length<1&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:Object(De.jsx)(ot.a,{variant:"Error",children:"No Neucore groups configured!"})})}),N.length>0&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:Object(De.jsxs)(lt.a.Select,{value:"",onChange:function(e){return m((function(t){return Object(oe.a)(Object(oe.a)({},t),{},{allowedNeucoreGroups:[].concat(Object(M.a)(t.allowedNeucoreGroups),[e.target.value])})}))},children:[Object(De.jsx)("option",{value:"",children:"(Select a group to add)"}),!v.isLoading&&N.map((function(e){return Object(De.jsx)("option",{value:e.name,children:e.name},e.id)}))]})})})]})]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"template",xs:12,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Template Text"}),Object(De.jsx)(lt.a.Control,{as:"textarea",rows:10,value:f.template,onChange:function(e){return k("template",e.target.value)}})]})]})})}),Object(De.jsxs)(Ve.a.Footer,{className:"edit-ping-template-dialog-footer",children:[Object(De.jsxs)("div",{className:Object(qe.a)("edit-ping-template-dialog-buttons-wrapper",P&&"hidden"),children:[!w&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Ie.a,{variant:"danger",disabled:P,onClick:function(){return E(!0)},children:"Delete"}),Object(De.jsx)("div",{className:"edit-ping-template-dialog-buttons-spacer"})]}),Object(De.jsx)(Ie.a,{variant:"secondary",onClick:j,disabled:P,children:"Cancel"}),Object(De.jsx)(Ie.a,{variant:"primary",disabled:!p||P,onClick:function(){p&&d&&(d(f),m({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1}))},children:"Save"})]}),!w&&Object(De.jsxs)("div",{className:Object(qe.a)("edit-ping-template-confirm-delete-buttons-wrapper",!P&&"hidden"),children:[Object(De.jsx)(Ie.a,{disabled:!P,onClick:function(){return E(!1)},children:"No"}),Object(De.jsx)("div",{className:"edit-ping-template-dialog-buttons-spacer",children:"Are you sure you want to delete this ping template?"}),Object(De.jsx)(Ie.a,{variant:"danger",disabled:!P,onClick:function(){E(!1),null===b||void 0===b||b(),m({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1})},children:"Yes"})]})]})]})}n(68);function dt(){var e,t,n,i=N(),c=w(),s=Object(L.a)(c,1)[0],l=C(),o=Object(L.a)(l,1)[0],u=k(),d=Object(L.a)(u,1)[0],j=Object(a.useState)({template:null,show:!1}),b=Object(L.a)(j,2),h=b[0],O=b[1],f=function(){return O({template:null,show:!1})},m=Object(Re.j)().url.split("/").slice(0,-1).join("/");return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)("div",{className:"pings-header",children:[Object(De.jsx)("h3",{children:"Manage Ping Templates"}),Object(De.jsx)("div",{style:{flex:1}}),Object(De.jsxs)(Be.b,{to:m,className:"btn btn-primary",role:"button",children:[Object(De.jsx)("i",{className:"bi-arrow-left"})," Back to Pings"]}),Object(De.jsxs)(Ie.a,{onClick:function(){return O({template:null,show:!0})},children:[Object(De.jsx)("i",{className:"bi-plus-lg"})," Add Ping Template"]})]}),Object(De.jsxs)(st.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,children:[Object(De.jsx)("thead",{children:Object(De.jsxs)("tr",{children:[Object(De.jsx)("th",{children:"Name"}),Object(De.jsx)("th",{children:"Targeted Channel"}),Object(De.jsx)("th",{children:"Groups Allowed to Ping"}),Object(De.jsx)("th",{children:"Calendar Support"}),Object(De.jsx)("th",{children:"Template"}),Object(De.jsx)("th",{children:"Action"})]})}),Object(De.jsxs)("tbody",{children:[i.isFetching&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:5,children:"Loading&elipsis;"})}),!i.isFetching&&(null!==(e=null===(t=i.data)||void 0===t?void 0:t.templates.length)&&void 0!==e?e:0)<1&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:5,children:"No ping templates defined"})}),null===(n=i.data)||void 0===n?void 0:n.templates.map((function(e){return Object(De.jsxs)("tr",{children:[Object(De.jsx)("th",{scope:"row",children:e.name}),Object(De.jsx)("td",{children:e.slackChannelName}),Object(De.jsx)("td",{children:e.allowedNeucoreGroups.length<1?Object(De.jsx)("i",{children:"(Everyone)"}):e.allowedNeucoreGroups.join(", ")}),Object(De.jsx)("td",{children:e.allowScheduling?"Yes":"No"}),Object(De.jsx)("td",{children:e.template.split("\n").map((function(e,t){return Object(De.jsxs)(r.a.Fragment,{children:[e,Object(De.jsx)("br",{})]},t)}))}),Object(De.jsx)("td",{children:Object(De.jsxs)(Ie.a,{size:"sm",onClick:function(){return O({template:e,show:!0})},children:[Object(De.jsx)("i",{className:"bi-pencil"})," Edit"]})})]},e.id)}))]})]}),Object(De.jsx)(ut,{show:h.show,template:h.template,onCancel:f,onSave:function(e){h.template?o({id:h.template.id,template:e}):s(e),f()},onDelete:function(){var e=h.template;e&&(d(e.id),f())}})]})}var jt=n(135),bt=n(130),ht=["value","onChange"];function Ot(e){var t=e.value,n=e.onChange,r=Object(d.a)(e,ht),i="YYYY-MM-DD",c="HH:mm",s="1970-01-01",l=Object(a.useState)(""),o=Object(L.a)(l,2),u=o[0],j=o[1],b=Object(a.useState)(""),h=Object(L.a)(b,2),O=h[0],f=h[1];Object(a.useEffect)((function(){var e=D.a.utc(t),n=D.a.utc("".concat(u,"T").concat(O));e.isSame(n)||(j(e.format(i)),f(e.format(c)))}),[t]);var m=function(e,t){var n=D.a.utc(e),a=D.a.duration(D.a.utc("".concat(s,"T").concat(t)).diff(D.a.utc(s)));return n.add(a)},p=function(){var e=m(u,O);e.isValid()||(e=D()(t)),j(e.format(i)),f(e.format(c))};return Object(De.jsxs)(He.a,Object(oe.a)(Object(oe.a)({},r),{},{children:[Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"date",xs:6,className:"mb-3",children:[Object(De.jsxs)(lt.a.Label,{className:"text-nowrap",children:["Date (",i,")"]}),Object(De.jsx)(lt.a.Control,{type:"date",value:u,pattern:"^[0-9]{4}-[0-9]{2}-[0-9]{2}$",onChange:function(e){var t=e.target.value;if(j(t),D.a.utc(t).isValid()){var a=m(t,O);a.isValid()&&n(a)}},onBlur:p})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"time",xs:6,className:"mb-3",children:[Object(De.jsxs)(lt.a.Label,{className:"text-nowrap",children:["Time (",c,")"]}),Object(De.jsx)(lt.a.Control,{type:"text",maxLength:5,pattern:"^[0-9]{2}:[0-9]{2}$",value:O,onChange:function(e){var t=e.target.value;if(f(t),D.a.utc("".concat(s,"T").concat(t)).isValid()){var a=m(u,t);a.isValid()&&n(a)}},onBlur:p})]})]}))}var ft=["value","onChange","durationComponents"],mt=[{label:"Days",unit:"days",format:function(e){return 0|e.asDays()}},{label:"Hours",unit:"hours",format:"HH"},{label:"Minutes",unit:"minutes",format:"mm"}];function pt(e){var t=e.value,n=e.onChange,r=e.durationComponents,i=void 0===r?mt:r,c=Object(d.a)(e,ft),s=function(e){return D.a.duration(Object.fromEntries(i.map((function(t,n){var a=t.unit,r=parseInt(e[n],10);return[a,isFinite(r)?r:0]}))))},l=function(e){return i.map((function(t){var n=t.format;return"function"===typeof n?"".concat(n(e)):D.a.duration(e.asMilliseconds(),"milliseconds").format(n)}))},o=Object(a.useState)(l(t)),u=Object(L.a)(o,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var e=l(s(j)),n=l(t);e.some((function(e,t){return e!==n[t]}))&&b(l(t))}),[t]);var h=function(e,t){var a=j.map((function(n,a){return a===e?t:n}));b(a),n(s(a))},O=function(){b(l(t))};return Object(De.jsx)(He.a,Object(oe.a)(Object(oe.a)({},c),{},{children:i.map((function(e,t){var n=e.label;return Object(De.jsxs)(lt.a.Group,{as:Je.a,xs:12/i.length,children:[Object(De.jsx)(lt.a.Label,{children:n}),Object(De.jsx)(lt.a.Control,{type:"number",pattern:"^-?[0-9]*$",value:j[t],onChange:function(e){return h(t,e.target.value)},onBlur:O})]},n)}))}))}function xt(e){var t=e.time,n=Object(a.useState)(t),r=Object(L.a)(n,2),i=r[0],c=r[1],s=Object(a.useCallback)((function(e){c((function(t){return"absolute"===e&&"relative"in t?{absolute:D()().add(t.relative).utc()}:"relative"===e&&"absolute"in t?{relative:D.a.duration(t.absolute.diff(D()()))}:t}))}),[]),l=Object(a.useCallback)((function(e){return c({absolute:e})}),[]),o=Object(a.useCallback)((function(e){return c({relative:e})}),[]),u=Object(a.useState)(vt(i)),d=Object(L.a)(u,2),j=d[0],b=d[1];return Object(a.useEffect)((function(){var e=function(){return b(vt(i))},t=setInterval(e,1e3);return e(),function(){return clearInterval(t)}}),[i]),Object(oe.a)(Object(oe.a)({},j),{},{handleChangeInputMode:s,inputMode:"absolute"in i?"absolute":"relative",handleAbsoluteDateChange:l,handleRelativeDateChange:o})}function vt(e){return{absoluteTime:"absolute"in e?e.absolute:D()().add(e.relative).utc(),relativeTime:"relative"in e?e.relative:D.a.duration(e.absolute.diff(D()()))}}n(115);function gt(){var e,t=N(),n=v(),r=Object(L.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(!1),l=Object(L.a)(s,2),o=l[0],u=l[1],d=xt({time:{relative:D.a.duration(0)}}),j=Object(a.useState)(""),b=Object(L.a)(j,2),h=b[0],O=b[1],f=Object(a.useState)(null),m=Object(L.a)(f,2),p=m[0],x=m[1],g=Object(a.useState)(""),y=Object(L.a)(g,2),w=y[0],C=y[1],k=Object(a.useState)(!1),S=Object(L.a)(k,2),T=S[0],P=S[1],E="\n\n--- old text ---\n\n",M=Object(a.useState)(!1),A=Object(L.a)(M,2),G=A[0],I=A[1],R=Object(a.useState)(!1),F=Object(L.a)(R,2),B=F[0],U=F[1];Object(a.useEffect)((function(){!G||B||c.isLoading||(U(!0),setTimeout((function(){I(!1),U(!1)}),2e3),P(!c.isSuccess))}),[c.isLoading,c.isSuccess,B,G]);var Y=p&&w!==(null===p||void 0===p?void 0:p.template)&&""!==w&&-1===w.indexOf(E);return Object(De.jsxs)(lt.a,{className:"send-pings",children:[Object(De.jsx)(Re.a,{when:T,message:"You haven't sent your ping yet. Are you sure you want to leave?"}),Object(De.jsxs)(He.a,{children:[Object(De.jsx)(Je.a,{xs:12,children:Object(De.jsxs)(ot.a,{variant:"warning",children:[Object(De.jsx)("i",{className:"bi-exclamation-triangle"})," ","If you send ",Object(De.jsx)("b",{children:"bad pings"})," you ",Object(De.jsx)("b",{children:"will be banned from sending pings"}),". Use the template, if possible. Also, ",Object(De.jsx)("b",{children:"don't spam newlines and emoji in your pings or you'll have your ping rights revoked"}),". Make sure you send your pings to the correct group. Some groups are meant for emergencies, don't randomly ping them. Just use it responsibly."]})}),Object(De.jsxs)(lt.a.Group,{as:Je.a,xs:12,md:4,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Send Ping to Group:"}),Object(De.jsx)(jt.a,{children:null===(e=t.data)||void 0===e?void 0:e.templates.map((function(e){return Object(De.jsxs)(jt.a.Item,{type:"button",action:!0,active:e===p,onClick:function(){return function(e){if(x(null!==e&&void 0!==e?e:null),e){var t=w.split(E,2),n=Object(L.a)(t,2),a=n[0],r=n[1];a===(null===p||void 0===p?void 0:p.template)||""===a?r?(C(e.template+E+r),P(!0)):(C(e.template),P(!1)):a!==e.template?(C(e.template+E+a),P(!0)):(C(e.template),P(!1))}}(e)},children:[e.name," (#",e.slackChannelName,")"]},e.id)}))})]}),Object(De.jsxs)(Je.a,{as:He.a,xs:12,md:8,className:"mb-3 px-0",children:[!!(null===p||void 0===p?void 0:p.allowScheduling)&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"schedule",xs:12,className:"mb-3 pe-0",children:[Object(De.jsx)(lt.a.Label,{children:"Ping Options"}),Object(De.jsx)(lt.a.Check,{checked:o,onChange:function(){return u((function(e){return!e}))},label:"Add this Ping to the Calendar"})]}),o&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)(lt.a.Group,{as:Je.a,controlid:"calendarTitle",xs:12,className:"mb-3 pe-0",children:[Object(De.jsx)(lt.a.Label,{children:"Calendar Entry Title"}),Object(De.jsx)(lt.a.Control,{value:h,onChange:function(e){return O(e.target.value)}})]}),Object(De.jsx)(Je.a,{xs:12,className:"pe-0",children:Object(De.jsx)(lt.a.Label,{children:"Calendar Time"})}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"eveDateTime",xs:12,lg:6,className:"pe-0",children:[Object(De.jsx)(lt.a.Label,{children:Object(De.jsx)(lt.a.Check,{inline:!0,label:"Use EVE Date and Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return d.handleChangeInputMode("absolute")},id:"absolute",checked:"absolute"===d.inputMode})}),Object(De.jsx)(Ot,{value:d.absoluteTime,onChange:d.handleAbsoluteDateChange,className:Object(qe.a)("time-mode-input","absolute"!==d.inputMode&&"inactive-time-mode")})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"relativeTime",xs:12,lg:6,className:"mb-3 pe-0",children:[Object(De.jsx)(lt.a.Label,{children:Object(De.jsx)(lt.a.Check,{inline:!0,label:"Use Relative Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return d.handleChangeInputMode("relative")},id:"relative",checked:"relative"===d.inputMode})}),Object(De.jsx)(pt,{value:d.relativeTime,onChange:d.handleRelativeDateChange,className:Object(qe.a)("time-mode-input","relative"!==d.inputMode&&"inactive-time-mode")})]})]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,xs:12,className:"mb-3 pe-0",children:[Object(De.jsx)(lt.a.Label,{children:"Ping Text:"}),Object(De.jsx)(lt.a.Control,{as:"textarea",rows:15,disabled:!p,placeholder:p?"":"Please select a channel first.",value:p?w:"",onChange:function(e){C(e.target.value),P(!0)}})]}),Object(De.jsx)(Je.a,{xs:12,className:"d-flex justify-content-end pe-0",children:Object(De.jsx)(Ie.a,{variant:"danger",disabled:!Y,onClick:function(){Y&&p&&w&&(i(Object(oe.a)({templateId:p.id,text:w},p.allowScheduling&&o?{scheduledTitle:h,scheduledFor:d.absoluteTime.toISOString()}:{})),I(!0))},children:"Send Ping"})})]}),Object(De.jsx)(Ve.a,{show:G,size:"sm",backdrop:"static",children:Object(De.jsxs)(Ve.a.Body,{className:"fs-5",children:[c.isLoading&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(bt.a,{animation:"border",role:"status",size:"sm",children:Object(De.jsx)("span",{className:"visually-hidden",children:"Sending\u2026"})})," ","Sending\u2026"]}),!c.isLoading&&c.isError&&Object(De.jsxs)("span",{className:"text-danger",children:[Object(De.jsx)("i",{className:"bi-exclamation-circle"})," Failed to send ping"]}),!c.isLoading&&c.isSuccess&&Object(De.jsxs)("span",{className:"text-success",children:[Object(De.jsx)("i",{className:"bi-check-circle"})," Ping sent"]})]})})]})]})}n(116);function yt(){var e,t,n,r=O(),i=(null===(e=r.data)||void 0===e?void 0:e.isLoggedIn)&&(null===(t=r.data)||void 0===t?void 0:t.character.roles.includes(G.UserRoles.PING)),c=(null===(n=r.data)||void 0===n?void 0:n.isLoggedIn)&&r.data.character.roles.includes(G.UserRoles.PING_TEMPLATES_WRITE),s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skip,t=Ue(),n=Ye(ke),r=Ye(Te),i=Ye(Se),c=function(){return t(ye())},s=function(){return t(ge())};return Object(a.useEffect)((function(){!0!==e&&t(ge())}),[t,e]),{pings:n,loading:r,hasMore:i,loadMore:c,reload:s}}({skip:r.isLoading||!i}),l=Object(Re.j)().url.split("/").slice(0,-1).join("/");return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)("div",{className:"pings-header",children:[Object(De.jsx)("h3",{children:"Sent Pings"}),Object(De.jsxs)(Ie.a,{onClick:s.reload,disabled:s.loading,children:[Object(De.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]}),Object(De.jsx)("div",{style:{flex:1}}),Object(De.jsxs)(Be.b,{to:l,className:"btn btn-primary",role:"button",children:[Object(De.jsx)("i",{className:"bi-arrow-left"})," Back to Pings"]}),c&&Object(De.jsxs)(Be.b,{to:"".concat(l,"/view-access"),className:"btn btn-primary",role:"button",children:[Object(De.jsx)("i",{className:"bi-wrench"})," Manage View Access"]})]}),Object(De.jsxs)(He.a,{children:[Object(De.jsx)(Je.a,{xs:12,children:Object(De.jsx)(ot.a,{variant:"info",children:"These Pings were either sent by you, or were sent to channels you have view access to. View access is determined by your Neucore groups, not which Slack channels you are in."})}),Object(De.jsxs)(Je.a,{xs:12,children:[Object(De.jsxs)(st.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,className:"sent-pings-table",children:[Object(De.jsx)("thead",{children:Object(De.jsxs)("tr",{children:[Object(De.jsx)("th",{children:"Author"}),Object(De.jsx)("th",{children:"Sent at"}),Object(De.jsx)("th",{children:"Sent to"}),Object(De.jsx)("th",{children:"Text"})]})}),Object(De.jsxs)("tbody",{children:[s.pings.length<1&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:4,children:"No Pings to show"})}),s.pings.map((function(e){return Object(De.jsxs)("tr",{children:[Object(De.jsx)("td",{children:e.author}),Object(De.jsx)("td",{children:Object(De.jsx)(ze,{time:e.sentAt,format:"YYYY-MM-DD HH:mm"})}),Object(De.jsx)("td",{children:e.slackChannelName}),Object(De.jsx)("td",{className:"text-cell",children:Object(De.jsx)("div",{title:e.text,children:e.text})})]},e.id)}))]})]}),Object(De.jsx)(Ie.a,{style:{width:"100%"},disabled:!s.hasMore||s.loading,onClick:s.loadMore,children:s.loading?"Loading\u2026":s.hasMore?"Load more":"(No more pings)"})]})]})]})}var Nt=["neucoreGroup"];function wt(){var e,t,n,r,i,c,s,l=Object(Re.j)().url.split("/").slice(0,-1).join("/")+"/sent",o=S(),u=Object(a.useMemo)((function(){var e,t;return(null!==(e=null===(t=o.data)||void 0===t?void 0:t.viewPermissions)&&void 0!==e?e:[]).reduce((function(e,t){var n,a=t.neucoreGroup,r=Object(d.a)(t,Nt);return e.set(a,[].concat(Object(M.a)(null!==(n=e.get(a))&&void 0!==n?n:[]),[r]).sort((function(e,t){return e.slackChannelName.localeCompare(t.slackChannelName)})))}),new Map)}),[null===(e=o.data)||void 0===e?void 0:e.viewPermissions]),j=Object(a.useState)(null),b=Object(L.a)(j,2),h=b[0],O=b[1],f=[].concat(Object(M.a)(u.keys()),Object(M.a)(h&&!u.has(h)?[h]:[])).sort(),m=y(),p=(null!==(t=null===(n=m.data)||void 0===n?void 0:n.neucoreGroups)&&void 0!==t?t:[]).filter((function(e){return!u.has(e.name)&&e.name!==h})).map((function(e){return e.name})),x=g(),v=(null!==(r=null===(i=x.data)||void 0===i?void 0:i.channels)&&void 0!==r?r:[]).filter((function(e){return(h&&u.get(h)||[]).every((function(t){return t.slackChannelName!==e.name}))})),N=T(),w=Object(L.a)(N,2),C=w[0],k=w[1],P=o.isFetching||m.isFetching||x.isFetching||k.isLoading;return Object(De.jsxs)(De.Fragment,{children:[Object(De.jsxs)("div",{className:"pings-header",children:[Object(De.jsx)("h3",{children:"Manage Ping View Access"}),Object(De.jsx)("div",{style:{flex:1}}),Object(De.jsxs)(Be.b,{to:l,className:"btn btn-primary",role:"button",children:[Object(De.jsx)("i",{className:"bi-arrow-left"})," Back to Sent Pings"]})]}),Object(De.jsxs)(He.a,{children:[Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"neucoreGroup",xs:12,md:4,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Neucore Group"}),f.length<1&&(P?Object(De.jsx)(ot.a,{variant:"info",className:"mb-2 py-2",children:"Loading\u2026"}):Object(De.jsx)(ot.a,{variant:"warning",className:"mb-2 py-2",children:"No view permissions defined."})),f.length>0&&Object(De.jsx)(jt.a,{className:"mb-2",children:f.map((function(e){return Object(De.jsx)(jt.a.Item,{type:"button",action:!0,active:e===h,onClick:function(){return O(e)},disabled:P,children:e},e)}))}),Object(De.jsxs)(lt.a.Select,{value:null!==h&&void 0!==h?h:"",onChange:function(e){O(e.target.value||null)},disabled:P||p.length<1,children:[P&&Object(De.jsx)("option",{value:"",children:"Loading\u2026"}),!P&&(p.length>0?Object(De.jsx)("option",{value:"",children:"(Select a group to add)"}):Object(De.jsx)("option",{value:"",children:"No more groups to add"})),!P&&p.map((function(e){return Object(De.jsx)("option",{value:e,children:e},e)}))]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"slackGroups",xs:12,md:8,children:[Object(De.jsx)(lt.a.Label,{children:"Can see pings sent to"}),Object(De.jsxs)(st.a,{variant:"dark",children:[Object(De.jsx)("thead",{children:Object(De.jsxs)("tr",{children:[Object(De.jsx)("th",{className:"w-100",children:"Slack Channel"}),Object(De.jsx)("th",{children:"Action"})]})}),Object(De.jsxs)("tbody",{children:[!h&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:"(Please select a group to manage first)"})}),h&&Object(De.jsxs)(De.Fragment,{children:[!(null===(c=u.get(h))||void 0===c?void 0:c.length)&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:Object(De.jsxs)(ot.a,{variant:"info",className:"mb-0 py-2",children:["Members of this group cannot view any"," ","pings other than those they sent themselves."]})})}),null===(s=u.get(h))||void 0===s?void 0:s.map((function(e){return Object(De.jsxs)("tr",{children:[Object(De.jsx)("td",{className:"align-middle",children:e.slackChannelName}),Object(De.jsx)("td",{children:Object(De.jsxs)(Ie.a,{size:"sm",className:"text-nowrap",onClick:function(){return function(e){var t;h&&C({neucoreGroup:h,allowedSlackChannelIds:(null!==(t=u.get(h))&&void 0!==t?t:[]).map((function(e){return e.slackChannelId})).filter((function(t){return t!==e}))})}(e.slackChannelId)},disabled:P,children:[Object(De.jsx)("i",{className:"bi-trash-fill"})," Remove"]})})]},e.slackChannelId)})),v.length>0&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:2,children:Object(De.jsxs)(lt.a.Select,{value:"",onChange:function(e){var t;h&&C({neucoreGroup:h,allowedSlackChannelIds:[].concat(Object(M.a)((null!==(t=u.get(h))&&void 0!==t?t:[]).map((function(e){return e.slackChannelId}))),[e.target.value])})},disabled:P,children:[Object(De.jsx)("option",{value:"",children:"(Select a channel to add)"}),!P&&v.map((function(e){return Object(De.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})})]})]})]})]})]})]})}function Ct(){var e,t,n=O(),a=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&n.data.character.roles.includes(G.UserRoles.PING),r=(null===(t=n.data)||void 0===t?void 0:t.isLoggedIn)&&n.data.character.roles.includes(G.UserRoles.PING_TEMPLATES_WRITE),i=Object(Re.j)(),c=i.path,s=i.url;if(!n.isFetching){var l;if(!(null===(l=n.data)||void 0===l?void 0:l.isLoggedIn))return Object(De.jsx)(Re.b,{to:"/login?postLoginRedirect=".concat(s)});if(!a)return Object(De.jsx)(Ae.a,{fluid:!0,children:Object(De.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(De.jsx)(Ae.a,{children:Object(De.jsxs)(Re.e,{children:[Object(De.jsxs)(Re.c,{exact:!0,path:c,children:[Object(De.jsxs)("div",{className:"pings-header",children:[Object(De.jsx)("h3",{children:"Send Pings"}),Object(De.jsx)(Be.b,{to:"".concat(s,"/sent"),className:"btn btn-primary",role:"button",children:"Show Sent Pings"}),Object(De.jsx)("div",{style:{flex:1}}),r&&Object(De.jsxs)(Be.b,{to:"".concat(s,"/templates"),className:"btn btn-primary",role:"button",children:[Object(De.jsx)("i",{className:"bi-wrench"})," Manage Ping Templates"]})]}),Object(De.jsx)(gt,{})]}),Object(De.jsx)(Re.c,{path:"".concat(c,"/sent"),children:Object(De.jsx)(yt,{})}),r&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Re.c,{path:"".concat(c,"/templates"),children:Object(De.jsx)(dt,{})}),Object(De.jsx)(Re.c,{path:"".concat(c,"/view-access"),children:Object(De.jsx)(wt,{})})]})]})})}n(117);var kt=["Low","Medium","High","Critical"],St=[["TCU","TCU"],["IHub","IHub"],["POS","POS"],["POCO","POCO"],["Raitaru","Raitaru"],["Azbel","Azbel"],["Sotiyo","Sotiyo"],["Athanor","Athanor"],["Tatara","Tatara"],["Astrahus","Astrahus"],["Fortizar","Fortizar"],["Keepstar","Keepstar"],["Pharolynx","Pharolynx Cyno Beacon"],["Tenebrex","Tenebrex Cyno Jammer"],["Ansiblex","Ansiblex Jump Gate"],["other","other"]],Tt=["Anchoring","Shield","Armor","Structure","other"],Pt=["friendly","enemy","neutral","other"],Et=["No data","Win","Loss"];function Mt(e){var t,n,r=e.show,i=e.event,c=e.onSave,s=e.onCancel,o=e.onDelete,u=Object(a.useState)({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""}),d=Object(L.a)(u,2),j=d[0],b=d[1];Object(a.useEffect)((function(){return b(i?Object(oe.a)({},i):{system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""})}),[i]);var h=xt({time:i?{absolute:D.a.utc(i.time)}:{relative:D.a.duration(0)}}),O=Object.entries(null!==j&&void 0!==j?j:{}).every((function(e){var t=Object(L.a)(e,2),n=t[0],a=t[1];return"notes"===n||!!a})),f="number"!==typeof(null===i||void 0===i?void 0:i.id),m=!f&&["Last edited by ".concat(null!==(t=null===i||void 0===i?void 0:i.updatedBy)&&void 0!==t?t:"unknown"),(null===i||void 0===i?void 0:i.updatedAt)?"at ".concat(D()(i.updatedAt).format("llll")," (").concat(D()(i.updatedAt).fromNow(),")"):"unknown"].join(" "),p="absolute"===h.inputMode,x=function(e,t){b((function(n){return Object(oe.a)(Object(oe.a)({},n),{},Object(l.a)({},e,t))}))},v=function(e){return function(t){return x(e,t.target.value)}},g=Object(a.useState)(!1),y=Object(L.a)(g,2),N=y[0],w=y[1];return Object(De.jsxs)(Ve.a,{show:r,size:"lg",backdrop:"static",dialogClassName:"edit-event-dialog",children:[Object(De.jsx)(Ve.a.Header,{children:Object(De.jsxs)(Ve.a.Title,{children:[f?"Add":"Edit"," Event"]})}),Object(De.jsx)(Ve.a.Body,{children:Object(De.jsx)(lt.a,{children:Object(De.jsxs)(He.a,{children:[m&&Object(De.jsx)(Je.a,{xs:12,className:"mb-3",children:m}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"solarSystem",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Solar System"}),Object(De.jsx)(lt.a.Control,{type:"text",placeholder:"e.g. NBPH-N",value:j.system,onChange:function(e){return x("system",e.target.value)}})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"priority",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Priority"}),Object(De.jsxs)(lt.a.Select,{value:j.priority,onChange:v("priority"),children:[Object(De.jsx)("option",{value:"",children:"(Please Select)"}),kt.map((function(e){return Object(De.jsx)("option",{value:e,children:e},e)}))]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"structure",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Structure"}),Object(De.jsxs)(lt.a.Select,{value:j.structure,onChange:v("structure"),children:[Object(De.jsx)("option",{value:"",children:"(Please Select)"}),St.map((function(e){var t=Object(L.a)(e,2),n=t[0],a=t[1];return Object(De.jsx)("option",{value:n,children:a},n)}))]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"type",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Type"}),Object(De.jsxs)(lt.a.Select,{value:j.type,onChange:v("type"),children:[Object(De.jsx)("option",{value:"",children:"(Please Select)"}),Tt.map((function(e){return Object(De.jsx)("option",{value:e,children:e},e)}))]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"standing",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Standing"}),Object(De.jsxs)(lt.a.Select,{value:j.standing,onChange:v("standing"),children:[Object(De.jsx)("option",{value:"",children:"(Please Select)"}),Pt.map((function(e){return Object(De.jsx)("option",{value:e,children:e},e)}))]})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"result",xs:12,sm:6,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Result"}),Object(De.jsx)(lt.a.Select,{value:j.result,onChange:v("result"),children:Et.map((function(e){return Object(De.jsx)("option",{value:e,children:e},e)}))})]}),Object(De.jsx)(Je.a,{xs:12,children:Object(De.jsx)(lt.a.Label,{children:"Event Time"})}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"eveDateTime",xs:12,lg:6,children:[Object(De.jsx)(lt.a.Label,{children:Object(De.jsx)(lt.a.Check,{inline:!0,label:"Use EVE Date and Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return h.handleChangeInputMode("absolute")},id:"absolute",checked:p})}),Object(De.jsx)(Ot,{value:h.absoluteTime,onChange:h.handleAbsoluteDateChange,className:Object(qe.a)("time-mode-input",!p&&"inactive-time-mode")})]}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"relativeTime",xs:12,lg:6,children:[Object(De.jsx)(lt.a.Label,{children:Object(De.jsx)(lt.a.Check,{inline:!0,label:"Use Relative Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return h.handleChangeInputMode("relative")},id:"relative",checked:!p})}),Object(De.jsx)(pt,{value:h.relativeTime,onChange:h.handleRelativeDateChange,className:Object(qe.a)("time-mode-input",p&&"inactive-time-mode")})]}),Object(De.jsx)(Je.a,{xs:12,className:"d-block d-lg-none",children:Object(De.jsx)("hr",{})}),Object(De.jsxs)(lt.a.Group,{as:Je.a,controlId:"notes",xs:12,className:"mb-3",children:[Object(De.jsx)(lt.a.Label,{children:"Notes"}),Object(De.jsx)(lt.a.Control,{as:"textarea",rows:1,value:null!==(n=null===j||void 0===j?void 0:j.notes)&&void 0!==n?n:"",onChange:function(e){return x("notes",e.target.value)}})]})]})})}),Object(De.jsxs)(Ve.a.Footer,{className:"dialog-footer",children:[Object(De.jsxs)("div",{className:Object(qe.a)("dialog-buttons-wrapper",N&&"hidden"),children:[!f&&Object(De.jsxs)(De.Fragment,{children:[Object(De.jsx)(Ie.a,{variant:"danger",disabled:N,onClick:function(){return w(!0)},children:"Delete"}),Object(De.jsx)("div",{className:"dialog-buttons-spacer"})]}),Object(De.jsx)(Ie.a,{variant:"secondary",onClick:s,disabled:N,children:"Cancel"}),Object(De.jsx)(Ie.a,{variant:"primary",disabled:!O||N,onClick:function(){O&&c&&(c(Object(oe.a)(Object(oe.a)({},j),{},{time:h.absoluteTime.toISOString()})),b({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""}))},children:"Save"})]}),!f&&Object(De.jsxs)("div",{className:Object(qe.a)("confirm-delete-buttons-wrapper",!N&&"hidden"),children:[Object(De.jsx)(Ie.a,{disabled:!N,onClick:function(){return w(!1)},children:"No"}),Object(De.jsx)("div",{className:"dialog-buttons-spacer",children:"Are you sure you want to delete the event?"}),Object(De.jsx)(Ie.a,{variant:"danger",disabled:!N,onClick:function(){w(!1),null===o||void 0===o||o(),b({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""})},children:"Yes"})]})]})]})}n(118);function Lt(e){var t=e.showResultColumn,n=void 0!==t&&t,a=e.canEdit,r=void 0!==a&&a,i=e.onEdit,c=e.events,s=function(e){var t=Date.parse(e.time),n=Date.now();return Math.abs(t-n)<36e5?"present":t>n?"future":"past"};return Object(De.jsxs)(st.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,className:"events-table",children:[Object(De.jsx)("thead",{children:Object(De.jsxs)("tr",{className:"events-header-row",children:[Object(De.jsx)("th",{children:"System"}),Object(De.jsx)("th",{children:"Region"}),Object(De.jsx)("th",{children:"Priority"}),Object(De.jsx)("th",{children:"Structure"}),Object(De.jsx)("th",{children:"Type"}),Object(De.jsx)("th",{children:"Standing"}),Object(De.jsx)("th",{children:"Relative Time"}),Object(De.jsx)("th",{children:"Local Time"}),Object(De.jsx)("th",{children:"EVE Time"}),n&&Object(De.jsx)("th",{children:"Result"}),Object(De.jsx)("th",{children:"Notes"}),r&&Object(De.jsx)("th",{children:"Action"})]})}),Object(De.jsxs)("tbody",{children:[0===c.length&&Object(De.jsx)("tr",{children:Object(De.jsx)("td",{colSpan:+n+10+ +r,children:"No Events"})}),c.map((function(e){return Object(De.jsxs)("tr",{className:Object(qe.a)("event-row",s(e)),children:[Object(De.jsx)("th",{scope:"row",children:Object(De.jsx)(Ze,{system:e.system})}),Object(De.jsx)("td",{children:Object(De.jsx)(We,{system:e.system,region:e.region})}),Object(De.jsx)("td",{children:e.priority}),Object(De.jsx)("td",{children:e.structure}),Object(De.jsx)("td",{children:e.type}),Object(De.jsx)("td",{children:e.standing}),Object(De.jsx)("td",{children:Object(De.jsx)(_e,{time:e.time})}),Object(De.jsx)("td",{children:Object(De.jsx)(ze,{time:e.time})}),Object(De.jsx)("td",{children:Object(De.jsx)(ze,{time:D()(e.time).utc(),format:"YYYY-MM-DD HH:mm",asLink:!0})}),n&&Object(De.jsx)("td",{children:e.result}),Object(De.jsx)("td",{className:"event-notes",children:e.notes}),r&&Object(De.jsx)("td",{children:Object(De.jsxs)(Ie.a,{size:"sm",onClick:function(){return null===i||void 0===i?void 0:i(e)},children:[Object(De.jsx)("i",{className:"bi-pencil"})," Edit"]})})]},e.id)}))]})]})}n(119);function At(){var e,t,n=O(),r=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&n.data.character.roles.includes(G.UserRoles.EVENTS_WRITE),i=(null===(t=n.data)||void 0===t?void 0:t.isLoggedIn)&&n.data.character.roles.includes(G.UserRoles.EVENTS_READ),c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skip,t=Ue(),n=Ye(Oe),r=Ye(me),i=Ye(fe),c=function(){return t(je())},s=function(){return t(de())};return Object(a.useEffect)((function(){!0!==e&&t(de())}),[t,e]),{events:n,loading:r,hasMoreEvents:i,loadMoreEvents:c,reloadEvents:s}}({skip:n.isLoading||!i}),s=m(),l=Object(L.a)(s,2),o=l[0],u=l[1],d=p(),j=Object(L.a)(d,2),b=j[0],h=j[1],f=x(),v=Object(L.a)(f,2),g=v[0],y=v[1],N=Object(a.useState)(null),w=Object(L.a)(N,2),C=w[0],k=w[1],S=!!C;Object(a.useEffect)((function(){var e;switch(C){case"add":e=u;break;case"edit":e=h;break;case"delete":e=y;break;default:return}e.isLoading||(e.isError&&console.log("An Error occurred trying to",C,"an event",e.error),k(null))}),[u,y,c,C,h]);var T=Object(a.useState)({event:null,show:!1}),P=Object(L.a)(T,2),E=P[0],M=P[1],A=function(){return M({event:null,show:!1})},I=Object(Re.j)().url;if(!n.isFetching){var R;if(!(null===(R=n.data)||void 0===R?void 0:R.isLoggedIn))return Object(De.jsx)(Re.b,{to:"/login?postLoginRedirect=".concat(I)});if(!i)return Object(De.jsx)(Ae.a,{fluid:!0,children:Object(De.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(De.jsxs)(Ae.a,{fluid:!0,children:[Object(De.jsxs)("div",{className:"timers-header",children:[Object(De.jsx)("h3",{children:"Timers"}),Object(De.jsxs)(Ie.a,{onClick:c.reloadEvents,disabled:S,children:[Object(De.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]}),Object(De.jsx)("div",{style:{flex:1}}),r&&Object(De.jsxs)(Ie.a,{onClick:function(){return M({event:null,show:!0})},disabled:S,children:[Object(De.jsx)("i",{className:"bi-calendar-plus"})," New Event"]})]}),Object(De.jsx)(Lt,{events:c.events,showResultColumn:!0,canEdit:r,onEdit:function(e){return M({event:e,show:!0})}}),Object(De.jsx)(Ie.a,{style:{width:"100%"},disabled:!c.hasMoreEvents||c.loading||S,onClick:c.loadMoreEvents,children:c.loading?"Loading\u2026":c.hasMoreEvents?"Load more":"(No more events)"}),Object(De.jsx)(Mt,{show:E.show,event:E.event,onCancel:A,onSave:function(e){E.event?(k("edit"),b({id:E.event.id,event:e})):(k("add"),o(e)),A()},onDelete:function(){var e=E.event;e&&(k("delete"),g(e.id),A())}})]})}n(120);function Gt(){return Object(De.jsx)(Le.a,{variant:"dark",bg:"primary",expand:"lg",children:Object(De.jsx)(Ae.a,{children:Object(De.jsx)("div",{className:"footer",children:"Brave Collective Services. For support write to support@bravecollective.freshdesk.com or ask in the ingame channel 'Brave IT Team'."})})})}function It(){var e=[{href:"/calendar",title:"Calendar",component:rt},{href:"/timers",title:"Timers",component:At},{href:"/pings",title:"Pings",component:Ct},{href:"/login",component:ct}],t=e.filter((function(e){return!!e.title}));return Object(De.jsx)(Be.a,{children:Object(De.jsxs)("div",{className:"app-wrapper",children:[Object(De.jsx)("header",{children:Object(De.jsx)(Fe,{pages:t})}),Object(De.jsx)("main",{className:"main",children:Object(De.jsxs)(Re.e,{children:[e.map((function(e){return Object(De.jsx)(Re.c,{path:e.href,component:e.component},e.href)})),Object(De.jsx)(Re.b,{from:"/",to:"/calendar"})]})}),Object(De.jsx)("footer",{children:Object(De.jsx)(Gt,{})})]})})}n(121),n(122);c.a.render(Object(De.jsx)(r.a.StrictMode,{children:Object(De.jsx)(s.Provider,{store:Me,children:Object(De.jsx)(It,{})})}),document.getElementById("root"))},23:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(95),t),r(n(102),t),r(n(103),t)},68:function(e,t,n){},95:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(96),t),r(n(97),t),r(n(98),t),r(n(99),t),r(n(100),t),r(n(101),t)},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},[[123,1,2]]]);
//# sourceMappingURL=main.6973d8ec.chunk.js.map