(this["webpackJsonp@ping-board/frontend"]=this["webpackJsonp@ping-board/frontend"]||[]).push([[0],{111:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(112),t),r(n(113),t),r(n(114),t),r(n(115),t),r(n(116),t),r(n(117),t),r(n(118),t)},112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledPing=void 0,t.isScheduledPing=function(e){return"string"===typeof e.scheduledFor&&"string"===typeof e.scheduledTitle}},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserRoles=void 0,function(e){e.EVENTS_READ="events.read",e.EVENTS_WRITE="events.write",e.PING="ping",e.PING_TEMPLATES_WRITE="ping.templates.write"}(t.UserRoles||(t.UserRoles={}))},123:function(e,t,n){},124:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(26),c=n.n(i),s=n(39),l=n(9),o=n(5),u=n(93),d=n(3),j=n(84),b=["neucoreGroup"],h=Object(j.createApi)({reducerPath:"loginApi",baseQuery:Object(j.fetchBaseQuery)({baseUrl:"/",credentials:"same-origin"}),tagTypes:["User","Event","Ping","PingTemplate","PingChannel","NeucoreGroup","PingViewPermission"],endpoints:function(e){return{getUser:e.query({query:function(){return"api/me"},providesTags:["User"]}),logOut:e.mutation({query:function(){return{url:"auth/logout",method:"POST"}},invalidatesTags:["User","Event"]}),getEvents:e.query({query:function(e){return{url:"api/events",params:e}},providesTags:function(e){return e&&e.events.length>0?e.events.map((function(e){return{type:"Event",id:e.id}})):["Event"]}}),addEvent:e.mutation({query:function(e){return{url:"api/events",method:"POST",body:e}},invalidatesTags:["Event"]}),updateEvent:e.mutation({query:function(e){var t=e.id,n=e.event;return{url:"api/events/".concat(t),method:"PUT",body:n}},invalidatesTags:["Event"]}),deleteEvent:e.mutation({query:function(e){return{url:"api/events/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return e?[{type:"Event",id:n}]:["Event"]}}),getSolarSystems:e.query({query:function(){return"api/events/solarSystems"}}),getPings:e.query({query:function(e){return{url:"api/pings",params:e||void 0}},providesTags:function(e){return e&&e.pings.length>0?e.pings.map((function(e){return{type:"Ping",id:e.id}})):["Ping"]}}),addPing:e.mutation({query:function(e){return{url:"api/pings",method:"POST",body:e}},invalidatesTags:function(e){return e?[{type:"Ping",id:e.id}]:["Ping"]}}),getPingChannels:e.query({query:function(){return{url:"api/pings/channels"}},providesTags:function(e){return e&&e.channels.length>0?e.channels.map((function(e){return{type:"PingChannel",id:e.id}})):["PingChannel"]}}),getAvailableNeucoreGroups:e.query({query:function(){return{url:"api/pings/neucore-groups"}},providesTags:function(e){return e&&e.neucoreGroups.length>0?e.neucoreGroups.map((function(e){return{type:"NeucoreGroup",id:e.id}})):["NeucoreGroup"]}}),getPingTemplates:e.query({query:function(){return{url:"api/pings/templates"}},providesTags:function(e){return e&&e.templates.length>0?e.templates.map((function(e){return{type:"PingTemplate",id:e.id}})):["PingTemplate"]}}),addPingTemplate:e.mutation({query:function(e){return{url:"api/pings/templates",method:"POST",body:e}},invalidatesTags:["PingTemplate"]}),updatePingTemplate:e.mutation({query:function(e){var t=e.id,n=e.template;return{url:"api/pings/templates/".concat(t),method:"PUT",body:n}},invalidatesTags:function(e){return e?[{type:"PingTemplate",id:e.id}]:["PingTemplate"]}}),deletePingTemplate:e.mutation({query:function(e){return{url:"api/pings/templates/".concat(e),method:"DELETE"}},invalidatesTags:function(e,t,n){return e?[{type:"PingTemplate",id:n}]:["PingTemplate"]}}),getPingViewPermissions:e.query({query:function(){return{url:"api/pings/view-permissions"}},providesTags:["PingViewPermission"]}),updatePingViewPermissionsByNeucoreGroup:e.mutation({query:function(e){var t=e.neucoreGroup,n=Object(d.a)(e,b);return{url:"api/pings/view-permissions/groups/".concat(t),method:"PUT",body:n}},invalidatesTags:["PingViewPermission","Ping"]})}}}),O=h.useGetUserQuery,m=h.useLogOutMutation,f=(h.useGetEventsQuery,h.useAddEventMutation),p=h.useUpdateEventMutation,v=h.useDeleteEventMutation,x=h.useGetSolarSystemsQuery,g=(h.useGetPingsQuery,h.useAddPingMutation),y=h.useGetPingChannelsQuery,N=h.useGetAvailableNeucoreGroupsQuery,w=h.useGetPingTemplatesQuery,C=h.useAddPingTemplateMutation,k=h.useUpdatePingTemplateMutation,S=h.useDeletePingTemplateMutation,T=h.useGetPingViewPermissionsQuery,P=h.useUpdatePingViewPermissionsByNeucoreGroupMutation,M=n(24),E=n.n(M),L=n(8),A=n(4),G=n(40),I=n(23),R=n(57),D=n(15),F=n.n(D),B=n(87),U=n.n(B),Y=n(88),q=n.n(Y),z=n(89),V=n.n(z),H=n(90),Q=n.n(H),J=n(91),_=n.n(J),K=n(92),W=n.n(K);F.a.extend(U.a),F.a.extend(q.a),F.a.extend(V.a),F.a.extend(Q.a),F.a.extend(_.a),F.a.extend(W.a);var X={af:function(){return n.e(3).then(n.t.bind(null,163,7))},am:function(){return n.e(4).then(n.t.bind(null,164,7))},"ar-dz":function(){return n.e(5).then(n.t.bind(null,165,7))},"ar-kw":function(){return n.e(6).then(n.t.bind(null,166,7))},"ar-ly":function(){return n.e(7).then(n.t.bind(null,167,7))},"ar-ma":function(){return n.e(8).then(n.t.bind(null,168,7))},"ar-sa":function(){return n.e(9).then(n.t.bind(null,169,7))},"ar-tn":function(){return n.e(10).then(n.t.bind(null,170,7))},ar:function(){return n.e(11).then(n.t.bind(null,171,7))},az:function(){return n.e(12).then(n.t.bind(null,172,7))},be:function(){return n.e(13).then(n.t.bind(null,173,7))},bg:function(){return n.e(14).then(n.t.bind(null,174,7))},bi:function(){return n.e(15).then(n.t.bind(null,175,7))},bm:function(){return n.e(16).then(n.t.bind(null,176,7))},bn:function(){return n.e(17).then(n.t.bind(null,177,7))},bo:function(){return n.e(18).then(n.t.bind(null,178,7))},br:function(){return n.e(19).then(n.t.bind(null,179,7))},bs:function(){return n.e(20).then(n.t.bind(null,180,7))},ca:function(){return n.e(21).then(n.t.bind(null,181,7))},cs:function(){return n.e(22).then(n.t.bind(null,182,7))},cv:function(){return n.e(23).then(n.t.bind(null,183,7))},cy:function(){return n.e(24).then(n.t.bind(null,184,7))},da:function(){return n.e(25).then(n.t.bind(null,185,7))},"de-at":function(){return n.e(26).then(n.t.bind(null,186,7))},"de-ch":function(){return n.e(27).then(n.t.bind(null,187,7))},de:function(){return n.e(28).then(n.t.bind(null,188,7))},dv:function(){return n.e(29).then(n.t.bind(null,189,7))},el:function(){return n.e(30).then(n.t.bind(null,190,7))},"en-au":function(){return n.e(31).then(n.t.bind(null,191,7))},"en-ca":function(){return n.e(32).then(n.t.bind(null,192,7))},"en-gb":function(){return n.e(33).then(n.t.bind(null,193,7))},"en-ie":function(){return n.e(34).then(n.t.bind(null,194,7))},"en-il":function(){return n.e(35).then(n.t.bind(null,195,7))},"en-in":function(){return n.e(36).then(n.t.bind(null,196,7))},"en-nz":function(){return n.e(37).then(n.t.bind(null,197,7))},"en-sg":function(){return n.e(38).then(n.t.bind(null,198,7))},"en-tt":function(){return n.e(39).then(n.t.bind(null,199,7))},en:function(){return n.e(40).then(n.t.bind(null,200,7))},eo:function(){return n.e(41).then(n.t.bind(null,201,7))},"es-do":function(){return n.e(42).then(n.t.bind(null,202,7))},"es-pr":function(){return n.e(43).then(n.t.bind(null,203,7))},"es-us":function(){return n.e(44).then(n.t.bind(null,204,7))},es:function(){return n.e(45).then(n.t.bind(null,205,7))},et:function(){return n.e(46).then(n.t.bind(null,206,7))},eu:function(){return n.e(47).then(n.t.bind(null,207,7))},fa:function(){return n.e(48).then(n.t.bind(null,208,7))},fi:function(){return n.e(49).then(n.t.bind(null,209,7))},fo:function(){return n.e(50).then(n.t.bind(null,210,7))},"fr-ca":function(){return n.e(51).then(n.t.bind(null,211,7))},"fr-ch":function(){return n.e(52).then(n.t.bind(null,212,7))},fr:function(){return n.e(53).then(n.t.bind(null,213,7))},fy:function(){return n.e(54).then(n.t.bind(null,214,7))},ga:function(){return n.e(55).then(n.t.bind(null,215,7))},gd:function(){return n.e(56).then(n.t.bind(null,216,7))},gl:function(){return n.e(57).then(n.t.bind(null,217,7))},"gom-latn":function(){return n.e(58).then(n.t.bind(null,218,7))},gu:function(){return n.e(59).then(n.t.bind(null,219,7))},he:function(){return n.e(60).then(n.t.bind(null,220,7))},hi:function(){return n.e(61).then(n.t.bind(null,221,7))},hr:function(){return n.e(62).then(n.t.bind(null,222,7))},ht:function(){return n.e(63).then(n.t.bind(null,223,7))},hu:function(){return n.e(64).then(n.t.bind(null,224,7))},"hy-am":function(){return n.e(65).then(n.t.bind(null,225,7))},id:function(){return n.e(66).then(n.t.bind(null,226,7))},is:function(){return n.e(67).then(n.t.bind(null,227,7))},"it-ch":function(){return n.e(68).then(n.t.bind(null,228,7))},it:function(){return n.e(69).then(n.t.bind(null,229,7))},ja:function(){return n.e(70).then(n.t.bind(null,230,7))},jv:function(){return n.e(71).then(n.t.bind(null,231,7))},ka:function(){return n.e(72).then(n.t.bind(null,232,7))},kk:function(){return n.e(73).then(n.t.bind(null,233,7))},km:function(){return n.e(74).then(n.t.bind(null,234,7))},kn:function(){return n.e(75).then(n.t.bind(null,235,7))},ko:function(){return n.e(76).then(n.t.bind(null,236,7))},ku:function(){return n.e(77).then(n.t.bind(null,237,7))},ky:function(){return n.e(78).then(n.t.bind(null,238,7))},lb:function(){return n.e(79).then(n.t.bind(null,239,7))},lo:function(){return n.e(80).then(n.t.bind(null,240,7))},lt:function(){return n.e(81).then(n.t.bind(null,241,7))},lv:function(){return n.e(82).then(n.t.bind(null,242,7))},me:function(){return n.e(83).then(n.t.bind(null,243,7))},mi:function(){return n.e(84).then(n.t.bind(null,244,7))},mk:function(){return n.e(85).then(n.t.bind(null,245,7))},ml:function(){return n.e(86).then(n.t.bind(null,246,7))},mn:function(){return n.e(87).then(n.t.bind(null,247,7))},mr:function(){return n.e(88).then(n.t.bind(null,248,7))},"ms-my":function(){return n.e(89).then(n.t.bind(null,249,7))},ms:function(){return n.e(90).then(n.t.bind(null,250,7))},mt:function(){return n.e(91).then(n.t.bind(null,251,7))},my:function(){return n.e(92).then(n.t.bind(null,252,7))},nb:function(){return n.e(93).then(n.t.bind(null,253,7))},ne:function(){return n.e(94).then(n.t.bind(null,254,7))},"nl-be":function(){return n.e(95).then(n.t.bind(null,255,7))},nl:function(){return n.e(96).then(n.t.bind(null,256,7))},nn:function(){return n.e(97).then(n.t.bind(null,257,7))},"oc-lnc":function(){return n.e(98).then(n.t.bind(null,258,7))},"pa-in":function(){return n.e(99).then(n.t.bind(null,259,7))},pl:function(){return n.e(100).then(n.t.bind(null,260,7))},"pt-br":function(){return n.e(101).then(n.t.bind(null,261,7))},pt:function(){return n.e(102).then(n.t.bind(null,262,7))},ro:function(){return n.e(103).then(n.t.bind(null,263,7))},ru:function(){return n.e(104).then(n.t.bind(null,264,7))},rw:function(){return n.e(105).then(n.t.bind(null,265,7))},sd:function(){return n.e(106).then(n.t.bind(null,266,7))},se:function(){return n.e(107).then(n.t.bind(null,267,7))},si:function(){return n.e(108).then(n.t.bind(null,268,7))},sk:function(){return n.e(109).then(n.t.bind(null,269,7))},sl:function(){return n.e(110).then(n.t.bind(null,270,7))},sq:function(){return n.e(111).then(n.t.bind(null,271,7))},"sr-cyrl":function(){return n.e(112).then(n.t.bind(null,272,7))},sr:function(){return n.e(113).then(n.t.bind(null,273,7))},ss:function(){return n.e(114).then(n.t.bind(null,274,7))},"sv-fi":function(){return n.e(115).then(n.t.bind(null,275,7))},sv:function(){return n.e(116).then(n.t.bind(null,276,7))},sw:function(){return n.e(117).then(n.t.bind(null,277,7))},ta:function(){return n.e(118).then(n.t.bind(null,278,7))},te:function(){return n.e(119).then(n.t.bind(null,279,7))},tet:function(){return n.e(120).then(n.t.bind(null,280,7))},tg:function(){return n.e(121).then(n.t.bind(null,281,7))},th:function(){return n.e(122).then(n.t.bind(null,282,7))},tk:function(){return n.e(123).then(n.t.bind(null,283,7))},"tl-ph":function(){return n.e(124).then(n.t.bind(null,284,7))},tlh:function(){return n.e(125).then(n.t.bind(null,285,7))},tr:function(){return n.e(126).then(n.t.bind(null,286,7))},tzl:function(){return n.e(127).then(n.t.bind(null,287,7))},"tzm-latn":function(){return n.e(128).then(n.t.bind(null,288,7))},tzm:function(){return n.e(129).then(n.t.bind(null,289,7))},"ug-cn":function(){return n.e(130).then(n.t.bind(null,290,7))},uk:function(){return n.e(131).then(n.t.bind(null,291,7))},ur:function(){return n.e(132).then(n.t.bind(null,292,7))},"uz-latn":function(){return n.e(133).then(n.t.bind(null,293,7))},uz:function(){return n.e(134).then(n.t.bind(null,294,7))},vi:function(){return n.e(135).then(n.t.bind(null,295,7))},"x-pseudo":function(){return n.e(136).then(n.t.bind(null,296,7))},yo:function(){return n.e(137).then(n.t.bind(null,297,7))},"zh-cn":function(){return n.e(138).then(n.t.bind(null,298,7))},"zh-hk":function(){return n.e(139).then(n.t.bind(null,299,7))},"zh-tw":function(){return n.e(140).then(n.t.bind(null,300,7))},zh:function(){return n.e(141).then(n.t.bind(null,301,7))}},Z=new Set;function $(){return($=Object(G.a)(E.a.mark((function e(){var t,n,a,r,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,a=Object(R.a)(null!==(t=navigator.languages)&&void 0!==t?t:[]),e.prev=2,i=E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.value,a=t.toLowerCase(),console.log("checking locale",a),!(a in X)){e.next=16;break}return e.prev=4,e.next=7,X[a]();case 7:return F.a.locale(a),console.log("loaded dayjs locale",a),n=!0,Z.forEach((function(e){return e(a)})),e.abrupt("return","break");case 14:e.prev=14,e.t0=e.catch(4);case 16:case"end":return e.stop()}}),e,null,[[4,14]])})),a.s();case 5:if((r=a.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),a.e(e.t1);case 17:return e.prev=17,a.f(),e.finish(17);case 20:n||console.warn("failed to load dayjs locale, falling back to en");case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}(function(){return $.apply(this,arguments)})().then();var ee={loadingMonths:[],loadedMonths:[],events:[]},te=function(e){return F.a.utc("".concat(e.year,"-").concat(e.month+1,"-01"))},ne=function(e){return te(e).format("YYYY-MM")};function ae(e){var t,n=te(e),a=((n.day()-F.a.localeData().firstDayOfWeek())%(t=7)+t)%t,r=n.subtract(F.a.duration({days:a})),i=Math.ceil((r.daysInMonth()+a)/7),c=r.add(F.a.duration({weeks:i}));return{from:r,to:c,displayedWeeks:i}}var re=Object(o.createAsyncThunk)("calendar/loadMonth",function(){var e=Object(G.a)(E.a.mark((function e(t){var n,a,r,i,c,s,l,o,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){return(c=Object(G.a)(E.a.mark((function e(t,n,i){var c,s,l,o,u,d,j;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],s=!0;case 2:if(!s){e.next=19;break}return o=new URLSearchParams({after:null!==(l=n(c))&&void 0!==l?l:a.toISOString(),before:r.toISOString()}),e.next=6,fetch("".concat(t,"?").concat(o.toString()),{credentials:"same-origin"});case 6:if(401!==(u=e.sent).status){e.next=11;break}s=!1,e.next=17;break;case 11:return e.next=13,u.json();case 13:d=e.sent,j=i(d),c=[].concat(Object(L.a)(c),Object(L.a)(j.values)),s=j.hasMore;case 17:e.next=2;break;case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e,t,n){return c.apply(this,arguments)},n=ae(t),a=n.from,r=n.to,e.next=5,Promise.all([i("/api/events",(function(e){return e.length>0?e[e.length-1].time:null}),(function(e){return{values:e.events,hasMore:e.remaining>0}})),i("/api/pings/scheduled",(function(e){return e.length>0?e[e.length-1].scheduledFor:null}),(function(e){return{values:e.pings,hasMore:e.remaining>0}}))]);case 5:return s=e.sent,l=Object(A.a)(s,2),o=l[0],u=l[1],e.abrupt("return",{cached:!1,events:o,pings:u});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{condition:function(e,t){var n=t.getState,a=ne(e),r=n().calendar,i=r.loadingMonths,c=r.loadedMonths;return!i.includes(a)&&!c.includes(a)}}),ie=Object(o.createSlice)({name:"calendar",initialState:ee,reducers:{clearCalendarEntries:function(e){e.events=[],e.loadedMonths=[]}},extraReducers:function(e){return e.addCase(re.pending,(function(e,t){e.loadingMonths.push(ne(t.meta.arg))})).addCase(re.rejected,(function(e,t){var n=ne(t.meta.arg);e.loadingMonths=e.loadingMonths.filter((function(e){return e!==n}))})).addCase(re.fulfilled,(function(e,t){var n=ne(t.meta.arg);if(e.loadingMonths=e.loadingMonths.filter((function(e){return e!==n})),t.payload){var a=new Map([].concat(Object(L.a)(e.events.map((function(e){return"event"===e.baseEntry.type?["event-".concat(e.baseEntry.event.id),e]:["ping-".concat(e.baseEntry.ping.id),e]}))),Object(L.a)(t.payload.events.map((function(e){return["event-".concat(e.id),ce(e)]}))),Object(L.a)(t.payload.pings.map((function(e){return["ping-".concat(e.id),se(e)]})))));e.events=Object(L.a)(a.values())}})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return ee})).addMatcher(h.endpoints.addEvent.matchFulfilled,(function(e,t){e.events=[].concat(Object(L.a)(e.events),[ce(t.payload)])})).addMatcher(h.endpoints.updateEvent.matchFulfilled,(function(e,t){var n=t.payload;e.events=e.events.map((function(e){return"event"===e.baseEntry.type&&e.baseEntry.event.id===n.id?ce(n):e}))})).addMatcher(h.endpoints.deleteEvent.matchFulfilled,(function(e,t){var n=t.meta.arg.originalArgs;e.events=e.events.filter((function(e){return"event"!==e.baseEntry.type||e.baseEntry.event.id!==n}))})).addMatcher(h.endpoints.addPing.matchFulfilled,(function(e,t){Object(I.isScheduledPing)(t.payload)&&(e.events=[].concat(Object(L.a)(e.events),[se(t.payload)]))}))}});function ce(e){var t;switch(e.priority.toLowerCase()){case"low":t="gray";break;case"medium":t="yellow";break;case"high":t="orange";break;case"critical":t="red"}var n=[e.standing.charAt(0).toUpperCase(),e.standing.substr(1)," ","other"===e.structure.toLowerCase()?"":e.structure+" ","other"===e.type.toLowerCase()?"":e.type.toLowerCase()+" ","timer in ",e.system].join("");return{dateTime:e.time,title:n,color:t,baseEntry:{type:"event",event:e}}}function se(e){return{dateTime:e.scheduledFor,title:e.scheduledTitle,baseEntry:{type:"ping",ping:e}}}var le=function(e){return e.calendar.events},oe=ie.actions.clearCalendarEntries,ue=n(2),de={loading:!1,events:[],hasMoreEvents:!0},je=Object(o.createAsyncThunk)("eventsList/reloadEvents",(function(e,t){var n=t.dispatch;n(xe()),n(be())})),be=Object(o.createAsyncThunk)("eventsList/loadMore",function(){var e=Object(G.a)(E.a.mark((function e(t,n){var a,r,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=me(a()),i=new URLSearchParams(Object(ue.a)(Object(ue.a)({},r.length>0?{before:r[r.length-1].time}:{}),{},{count:"40"})),c=fetch("/api/events?".concat(i.toString()),{credentials:"same-origin"}),e.next=6,c.then((function(e){return e.json()}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().eventsList.loading}});function he(e){return Object(L.a)(e).sort((function(e,t){return Date.parse(t.time)-Date.parse(e.time)}))}var Oe=Object(o.createSlice)({name:"eventsList",initialState:de,reducers:{clearEvents:function(e){e.loading=!1,e.events=[],e.hasMoreEvents=!0},eventsReceived:function(e,t){e.loading=!1,e.events=[].concat(Object(L.a)(e.events),Object(L.a)(t.payload.events)),e.hasMoreEvents=t.payload.remaining>0}},extraReducers:function(e){return e.addCase(be.pending,(function(e){e.loading=!0})).addCase(be.fulfilled,(function(e,t){e.loading=!1,e.events=he([].concat(Object(L.a)(e.events),Object(L.a)(t.payload.events))),e.hasMoreEvents=t.payload.remaining>0})).addCase(be.rejected,(function(e){e.loading=!1})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return de})).addMatcher(h.endpoints.addEvent.matchFulfilled,(function(e,t){e.events=he([].concat(Object(L.a)(e.events),[t.payload]))})).addMatcher(h.endpoints.updateEvent.matchFulfilled,(function(e,t){var n=t.payload;e.events=he(e.events.map((function(e){return e.id===n.id?n:e})))})).addMatcher(h.endpoints.deleteEvent.matchFulfilled,(function(e,t){var n=t.meta.arg.originalArgs;e.events=e.events.filter((function(e){return e.id!==n}))}))}}),me=function(e){return e.eventsList.events},fe=function(e){return e.eventsList.hasMoreEvents},pe=function(e){return e.eventsList.loading},ve=Oe.actions,xe=ve.clearEvents,ge=(ve.eventsReceived,{loading:!1,pings:[],hasMore:!0}),ye=Object(o.createAsyncThunk)("pingsList/reloadPings",(function(e,t){var n=t.dispatch;n(Ee()),n(Ne())})),Ne=Object(o.createAsyncThunk)("pingsList/loadMore",function(){var e=Object(G.a)(E.a.mark((function e(t,n){var a,r,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=Se(a()),i=new URLSearchParams(r.length>0?{before:r[r.length-1].sentAt}:{}),c=fetch("/api/pings?".concat(i.toString()),{credentials:"same-origin"}),e.next=6,c.then((function(e){return e.json()}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{condition:function(e,t){return!(0,t.getState)().pingsList.loading}});function we(e){return Object(L.a)(e).sort((function(e,t){return Date.parse(t.sentAt)-Date.parse(e.sentAt)}))}var Ce,ke=Object(o.createSlice)({name:"pingsList",initialState:ge,reducers:{clearPings:function(e){e.loading=!1,e.pings=[],e.hasMore=!0},pingsReceived:function(e,t){e.loading=!1,e.pings=[].concat(Object(L.a)(e.pings),Object(L.a)(t.payload.pings)),e.hasMore=t.payload.remaining>0}},extraReducers:function(e){return e.addCase(Ne.pending,(function(e){e.loading=!0})).addCase(Ne.fulfilled,(function(e,t){e.loading=!1,e.pings=we([].concat(Object(L.a)(e.pings),Object(L.a)(t.payload.pings))),e.hasMore=t.payload.remaining>0})).addCase(Ne.rejected,(function(e){e.loading=!1})).addMatcher(h.endpoints.logOut.matchFulfilled,(function(){return ge})).addMatcher(h.endpoints.addPing.matchFulfilled,(function(e,t){e.pings=we([].concat(Object(L.a)(e.pings),[t.payload]))}))}}),Se=function(e){return e.pingsList.pings},Te=function(e){return e.pingsList.hasMore},Pe=function(e){return e.pingsList.loading},Me=ke.actions,Ee=Me.clearPings,Le=(Me.pingsReceived,Object(o.configureStore)({reducer:(Ce={},Object(l.a)(Ce,h.reducerPath,h.reducer),Object(l.a)(Ce,ie.name,ie.reducer),Object(l.a)(Ce,Oe.name,Oe.reducer),Object(l.a)(Ce,ke.name,ke.reducer),Ce),middleware:function(e){return e().concat(h.middleware)}}));Object(u.setupListeners)(Le.dispatch);n(122),n(123),n(124);var Ae=n(160),Ge=n(149),Ie=n(161),Re=n(150),De=n(12),Fe=n(0);function Be(e){var t,n=Object(De.h)(),a=function(e){return function(t){t.preventDefault(),n.push(e)}},r=O(void 0,{pollingInterval:6e4}),i=m(),c=Object(A.a)(i,2),s=c[0],l=c[1].isLoading,o=r.isFetching||l;return Object(Fe.jsx)(Ae.a,{variant:"dark",bg:"primary",expand:"md",children:Object(Fe.jsxs)(Ge.a,{fluid:!0,children:[Object(Fe.jsx)(Ae.a.Brand,{href:"/",children:"Brave Collective Pingboard"}),Object(Fe.jsx)(Ae.a.Toggle,{"aria-controls":"navbar-nav"}),Object(Fe.jsxs)(Ae.a.Collapse,{id:"navbar-nav",className:"justify-content-end",children:[Object(Fe.jsx)(Ie.a,{variant:"pills",className:"me-auto",children:e.pages.map((function(e){return Object(Fe.jsx)(Ie.a.Link,{onClick:a(e.href),href:e.href,children:e.title},e.title)}))}),o?Object(Fe.jsx)(Ae.a.Text,{children:"Loading\u2026"}):(null===(t=r.data)||void 0===t?void 0:t.isLoggedIn)?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Ae.a.Text,{children:r.data.character.name}),Object(Fe.jsx)(Re.a,{onClick:function(){return s()},children:"Log Out"})]}):Object(Fe.jsx)(Re.a,{onClick:a("/login"),href:"/login",children:"Log In"})]})]})})}var Ue=n(21),Ye=function(){return Object(s.useDispatch)()},qe=s.useSelector,ze=n(13);function Ve(e){var t=e.time,n=e.format,a=void 0===n?"llll":n,r=e.asLink,i=void 0!==r&&r,c=e.className,s=F()(t);if(i){var l="https://time.nakamura-labs.com/#".concat(s.unix());return Object(Fe.jsx)("a",{className:c,href:l,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:s.format(a)})}return Object(Fe.jsx)("span",{className:c,children:s.format(a)})}var He=n(158),Qe=n(151),Je=n(96);function _e(e){var t="https://evemaps.dotlan.net/map/".concat(e.region,"/").concat(e.constellation);return Object(Fe.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.constellation})}function Ke(e){var t=e.time,n=Object(a.useState)(F()(t).fromNow()),r=Object(A.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){var e=setInterval((function(){c(F()(t).fromNow())}),1e3);return function(){return clearInterval(e)}}),[t]),Object(Fe.jsx)("span",{children:i})}var We=[{regex:/\n/g,onMatch:function(e){return Object(Fe.jsx)("br",{})}},{regex:/\[([^\]]+\]\([^)]+)\)>/g,onMatch:function(e){var t=e.indexOf("]("),n=e.substring(0,t),a=e.substring(t+2);return Object(Fe.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:a})}},{regex:/<([^|]+\|[^>]+)>/g,onMatch:function(e){var t=e.indexOf("|"),n=e.substring(0,t),a=e.substring(t+1);return Object(Fe.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:a})}},{regex:/\*([^*]+)\*/g,onMatch:function(e){return Object(Fe.jsx)("b",{children:e})}},{regex:/_([^*]+)_/g,onMatch:function(e){return Object(Fe.jsx)("i",{children:e})}},{regex:/~([^~]+)~/g,onMatch:function(e){return Object(Fe.jsx)("s",{children:e})}}];function Xe(e){var t=e.text,n=We.reduce((function(e,t){var n=t.regex,a=t.onMatch;return e.flatMap((function(e){if("string"!==typeof e)return[e];var t=[];return e.replace(n,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.length>3?n.slice(1,n.length-2):[];return t.push(a.apply(void 0,Object(L.a)(i))),"\0"})).split("\0").flatMap((function(e,n){return[e].concat(Object(L.a)(t[n]?[t[n]]:[]))}))}))}),[t]);return Object(Fe.jsx)(Fe.Fragment,{children:n.map((function(e,t){return Object(Fe.jsx)(r.a.Fragment,{children:e},t)}))})}function Ze(e){var t=e.ping;return Object(Fe.jsxs)(Qe.a,{className:"mt-n2",children:[t.scheduledFor&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Je.a,{xs:3,children:"EVE Time"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)(Ve,{time:F.a.utc(t.scheduledFor),asLink:!0,format:"YYYY-MM-DD HH:mm"})}),Object(Fe.jsx)(Je.a,{xs:3,children:"Local Time"}),Object(Fe.jsxs)(Je.a,{xs:9,children:[Object(Fe.jsx)(Ve,{time:t.scheduledFor})," (",Object(Fe.jsx)(Ke,{time:t.scheduledFor}),")"]})]}),Object(Fe.jsx)(Je.a,{xs:3,children:"Channel"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.slackChannelName}),Object(Fe.jsx)(Je.a,{xs:3,children:"Sent By"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.author}),Object(Fe.jsx)("hr",{className:"my-1"}),Object(Fe.jsx)(Je.a,{xs:3,children:"Ping Text"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)(Xe,{text:t.text})})]})}function $e(e){var t="https://evemaps.dotlan.net/map/".concat(e.region)+(e.system?"/".concat(e.system):"");return Object(Fe.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.region})}function et(e){var t="https://evemaps.dotlan.net/system/".concat(e.system);return Object(Fe.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e.system})}var tt=["entry"];function nt(e){var t,n,a=e.entry,r=Object(d.a)(e,tt);return Object(Fe.jsxs)(He.a,Object(ue.a)(Object(ue.a)({},r),{},{children:[Object(Fe.jsx)(He.a.Header,{closeButton:!0,children:Object(Fe.jsxs)(He.a.Title,{children:[Object(Fe.jsx)("i",{className:{event:"bi-stopwatch",ping:"bi-broadcast-pin"}[null!==(t=null===a||void 0===a?void 0:a.baseEntry.type)&&void 0!==t?t:"event"]})," ",null===a||void 0===a?void 0:a.title,Object(Fe.jsx)("h6",{className:"m-0",children:{event:"Timerboard Event",ping:"Ping"}[null!==(n=null===a||void 0===a?void 0:a.baseEntry.type)&&void 0!==n?n:"event"]})]})}),Object(Fe.jsxs)(He.a.Body,{children:["event"===(null===a||void 0===a?void 0:a.baseEntry.type)&&Object(Fe.jsx)(at,{event:a.baseEntry.event}),"ping"===(null===a||void 0===a?void 0:a.baseEntry.type)&&Object(Fe.jsx)(Ze,{ping:a.baseEntry.ping})]})]}))}function at(e){var t=e.event;return Object(Fe.jsxs)(Qe.a,{className:"mt-n2",children:[Object(Fe.jsx)(Je.a,{xs:3,children:"EVE Time"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)(Ve,{time:F.a.utc(t.time),asLink:!0,format:"YYYY-MM-DD HH:mm"})}),Object(Fe.jsx)(Je.a,{xs:3,children:"Local Time"}),Object(Fe.jsxs)(Je.a,{xs:9,children:[Object(Fe.jsx)(Ve,{time:t.time})," (",Object(Fe.jsx)(Ke,{time:t.time}),")"]}),Object(Fe.jsx)(Je.a,{xs:3,children:"Priority"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.priority}),Object(Fe.jsx)("hr",{className:"my-1"}),Object(Fe.jsx)(Je.a,{xs:3,children:"System"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)(et,{system:t.system})}),Object(Fe.jsx)(Je.a,{xs:3,children:"Constellation"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)(_e,{constellation:t.constellation,region:t.region})}),Object(Fe.jsx)(Je.a,{xs:3,children:"Region"}),Object(Fe.jsx)(Je.a,{xs:9,children:Object(Fe.jsx)($e,{region:t.region,system:t.system})}),Object(Fe.jsx)("hr",{className:"my-1"}),t.result&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Je.a,{xs:3,children:"Result"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.result})]}),Object(Fe.jsx)(Je.a,{xs:3,children:"Standing"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.standing}),Object(Fe.jsx)(Je.a,{xs:3,children:"Type"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.type}),Object(Fe.jsx)(Je.a,{xs:3,children:"Structure"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.structure}),t.notes&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Je.a,{xs:3,children:"Notes"}),Object(Fe.jsx)(Je.a,{xs:9,children:t.notes.split("\n").map((function(e){return Object(Fe.jsxs)(Fe.Fragment,{children:[e,Object(Fe.jsx)("br",{})]})}))})]})]})}n(129);function rt(e){var t=e.year,n=e.month,r=e.events,i=e.className,c=ae({year:t,month:n}),s=c.from,l=c.displayedWeeks,o=Object(a.useState)(!1),u=Object(A.a)(o,2),d=u[0],j=u[1],b=Object(a.useState)(null),h=Object(A.a)(b,2),O=h[0],m=h[1],f=Object(L.a)(new Array(l)).map((function(e,t){return{week:s.add(7*t,"days").week(),days:Object(L.a)(new Array(7)).map((function(e,n){var a=s.add(7*t+n,"days"),i=a.valueOf(),c=a.add(1,"days").valueOf(),l=a.format("YYYY-MM-DD")===F.a.utc().format("YYYY-MM-DD");return{date:a,isToday:l,events:r.filter((function(e){var t=F.a.utc(e.dateTime).valueOf();return t>=i&&t<c})).sort((function(e,t){return F.a.utc(e.dateTime).valueOf()-F.a.utc(t.dateTime).valueOf()}))}}))}}));return function(){var e=Object(a.useState)(F.a.locale()),t=Object(A.a)(e,2),n=t[0],r=t[1];Z.add(r),Object(a.useEffect)((function(){return function(){Z.delete(r)}}),[])}(),Object(Fe.jsxs)("div",{className:Object(ze.a)("d-flex","flex-column","bg-dark",i),children:[f.map((function(e,t){return Object(Fe.jsxs)("div",{className:Object(ze.a)("flex-fill position-relative d-flex flex-grow-1",t>0&&"border-top"),children:[Object(Fe.jsx)("div",{className:"py-1 mx-1",style:{width:28},children:Object(Fe.jsx)("div",{className:"h-100 rounded-1 px-1 text-center",style:{background:"var(--bs-gray-700)"},children:e.days[0].date.week()})}),e.days.map((function(e,a){return Object(Fe.jsxs)("div",{"aria-hidden":!0,className:Object(ze.a)("calendar-day","flex-grow-1","overflow-hidden",a>0&&"border-start",e.date.month()!==n&&"text-muted"),style:{flexBasis:0},children:[0===t&&Object(Fe.jsx)("div",{className:"px-1 text-center text-white",children:e.date.format("dddd")}),Object(Fe.jsx)("div",{className:Object(ze.a)("day",e.isToday&&"today"),children:Object(Fe.jsx)("span",{children:e.date.date()})}),e.events.map((function(e,t){var n;return Object(Fe.jsxs)("div",{className:Object(ze.a)("calendar-event",null!==(n=e.color)&&void 0!==n?n:"cyan"),onClick:function(){return t=e,j(!0),void m(t);var t},children:[Object(Fe.jsx)(Ve,{time:F.a.utc(e.dateTime),asLink:!0,format:"HH:mm",className:"me-1"}),Object(Fe.jsxs)("span",{children:[Object(Fe.jsx)("i",{className:{event:"bi-stopwatch",ping:"bi-broadcast-pin"}[e.baseEntry.type]})," ",e.title]})]},t)}))]},e.date.date())}))]},t)})),Object(Fe.jsx)(nt,{entry:O,show:d,onHide:function(){j(!1)},fullscreen:"sm-down"})]})}function it(){var e,t=Ye(),n=O(),r=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&(n.data.character.roles.includes(I.UserRoles.EVENTS_READ)||n.data.character.roles.includes(I.UserRoles.PING)),i=qe(le),c=Object(a.useState)(F.a.utc()),s=Object(A.a)(c,2),l=s[0],o=s[1],u=l.month(),d=l.year();Object(a.useEffect)((function(){t(re({month:u,year:d}))}),[t,u,d]);var j=Object(De.j)().url;if(!n.isFetching){var b;if(!(null===(b=n.data)||void 0===b?void 0:b.isLoggedIn))return Object(Fe.jsx)(De.b,{to:"/login?postLoginRedirect=".concat(j)});if(!r)return Object(Fe.jsx)(Ge.a,{fluid:!0,children:Object(Fe.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(Fe.jsxs)(Ge.a,{fluid:!0,className:"h-100 d-flex flex-column",children:[Object(Fe.jsx)("h3",{className:"mt-n1 pt-3",children:"Calendar"}),Object(Fe.jsxs)("div",{className:"d-flex mb-2",children:[Object(Fe.jsx)(Re.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o(F.a.utc())},children:"Today"}),Object(Fe.jsx)(Re.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o((function(e){return e.subtract(F.a.duration({months:1}))}))},children:Object(Fe.jsx)("i",{className:"bi-chevron-left"})}),Object(Fe.jsx)(Re.a,{size:"sm",variant:"outline-light",className:"me-2",onClick:function(){return o((function(e){return e.add(F.a.duration({months:1}))}))},children:Object(Fe.jsx)("i",{className:"bi-chevron-right"})}),Object(Fe.jsx)("h4",{className:"h-100 mb-0 me-2 align-middle",children:l.format("MMMM YYYY")}),Object(Fe.jsxs)(Re.a,{size:"sm",variant:"outline-light",onClick:function(){t(oe()),t(re({month:u,year:d}))},children:[Object(Fe.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]})]}),Object(Fe.jsx)(rt,{className:"flex-fill mb-2",year:l.year(),month:l.month(),events:i})]})}var ct=n.p+"static/media/brave-logo.070fd9e9.svg";n(130);function st(){var e,t=O(),n=Object(De.i)();if(null===(e=t.data)||void 0===e?void 0:e.isLoggedIn)return Object(Fe.jsx)(De.b,{to:"/"});var a=new URLSearchParams(n.search).get("postLoginRedirect"),r="/auth/login"+(a?"?".concat(new URLSearchParams({postLoginRedirect:a})):"");return Object(Fe.jsxs)(Ge.a,{className:"login-container",children:[Object(Fe.jsx)("div",{style:{flex:"33%"}}),Object(Fe.jsxs)(Qe.a,{className:"jumbotron",style:{justifyContent:"center"},children:[Object(Fe.jsxs)(Je.a,{sm:7,children:[Object(Fe.jsx)("h1",{children:"Brave Collective PingBoard"}),Object(Fe.jsx)("hr",{}),Object(Fe.jsx)("p",{children:"Log in with your EVE Online Account to gain access."}),Object(Fe.jsx)("p",{children:Object(Fe.jsx)("a",{href:r,children:Object(Fe.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAAtCAQAAAD1900CAAAIy0lEQVR42u2ca2wcVxXHf7NeUqF2pxRViLKbVhXQeDYIaD7sOlABEXZAiEfkqGoIqpKCUpJSO03tiqeCIiREiCBxohYoSu0UQZGSOOUl0iSEhwR+fCkt9S5IgKBeoyCMGk+CHGi8lw/3zu68d9be9e7E+a+0O3Pm3HPPOffccx8zs9raBF9fNdDBdawECLTQcwvzVxlkSFv71Ts/fzui1VpHgkaCckx0jTeS/JmXt2rvFG/ln63WJSJeyxrO8/pWq7ECoPEGCn9PJrjQak0iQ2aN5cocWlvlqOXVRjALdyTayQG1oNVJXxrayzPLrc0CkCi32uq64K9tMx3XnMCLA8ok2yt5hkOw/Mk+Pt5pNDQSrVbhOtoXyTj1DUF5EZkjTrlx8WiGlUkRI9eJRa1W4mPfUtB4K0XcModYIXmgPZAMWgEsBc1qwDJltCbo2/6Wt8ISSDRjqdY8B7X7INje2tVrS1LEaiUvSMRK3/hCo0nDSrMgt8/jo2/ckQxLhBMRBPyGx3iIbQDs5HlfnnV8C4BjPMEB3hNBah54BzkmecFBvx4YywfRmE2wEWYBeNRXXIIBAGYZrktqmr+iOyhl4jUIxh1JeYvFjeizbsECl3icLwN38RFGPRwf4y0APM5lok7ZFoBpdEyHdoIFNF99JdJ0A+eYsdFydJMBJjiFqWi95NAxmXRp20uKS4ySwwCKTAI5DC75WOWGQR/wkIO2zaONpZNhOzuHTq7CadmQJ2XjOeYq77XJiV5SFJmkD4NzEbT3QiNwWLFTv8OvQ4RcBuBn3EsW2MUZRbGQUg4r8FMbtchXaqr3ex+tRGjuSNMHFG3N0csXbA79DCbQpwZB6CblcHs3OSYZVQ1d5H5ko09GcG+KnDp6ghxHOAYebSxI+VVfSE4Zgt30AaforsgDZ3D42eRGNzmOMIlBLtLkwA+CpAgZxweU8rWf+ChzgGHgFnbwDceVHbwOgAOqxx/lx8Ar/HER6i7U2OcQ6rvK8TBwls9i8H0MNjGCwTbgMCPsp4dtjqFOqNJSjsFtzFRotVBgF3JO5CzhV1bKP6zOplX43EQZ6ASKXEQAM5ys+LcKr03+nhCUGUKntKiZmibvygbjHwDczM0hPJeVaS9wmg8CWzjJ3ypX7+Q+AH5emVi+wqsArAlV7U8B9PrMzKMDo0CRCfLkGSEPwAgwSg86aZ+ebaHH43iDvCrdi47JKLAdOAsYwATbyQB5dQ10+jGYYdhTj122pR1kkLkEoOTT8H429aJTJE0PJqOOTGGgAzO+HNvJAxOMBgxNifDVyjMRGuBXPKqOhtjADXQwyMOVq4N0AFcqvQQGeF8Eqet8qfXuPxrK8Zb7DUUrKsq6kLIzpNns0zj9wFlm+BKoAJCUDP3ACP2AXG3J4PiimlSn2RVSW1FpJ/Ur1GlTD3lMVU+ej9oau4c8h5nw4dhPjzrLB2gmSFgjud8nGizuCypFv4t3K8o9rAdgmAuLlOn8lNVd2XCN3fpXj3UEOmCG2it/SxRJ0+nSp6AaOq3kpckBJqVK3TspAicZUpST3M1hIO+pZ7v6WHL1yryloHjSiqO3hk0yvN7LVkCn02UJPhyd9ABb2Qrk6QzwRnLpT3NXyw+ziTcCg4zzKq9hEIALjDToTqpggbD1TjU4JMoOqtNdm9kIwJCnn1rlz2CwmZJLH9lbBWCi8ybSQNEWmOM8AJQqUscRTLlkyKN+dfYUVq7oxADMStmM4pnghMdG9/c4c8w59Hf/2jnkgFLAGtD8clWNu7L3RGjGq7byVzjIfuAOtvA0H+d2AL7JFRv/50hGkBocHFGyj8WheWRZN/0Fupp9pFyNVnXpCXbTwzA46hwnT4osMMxusoomHBKctbr7sYUhG32aEhmypLHyhgBKakJqesp6bXLWKAJ+7TD4NtYw5e/T0Oc5NgDwPC/XbA4Lp9nC3cCn+R0PqtLPOWp4G7cBs/w2sswqyq6hyT0HcWeOoF4GgqMc5UXwCTaLMscZNqqRucozDWQpAc+xW034pj3u9xsA3OFy1GFFgQwGGeyhVqrweG30frvrDvp12lwA5nxjQJAMm//LvYgfMOlzzWqYf/EHh8D9PIPGTTzNjYDga66KP8EG4C/cQBjOB9BFyJkXckjIUEKuAkpAgS7V32tjnI0e3gKQRc4zTDLohE8ga0MouRvJkK0pTdq0mmmbTYtDQXXfINRYykrIaUsQfsluV5U/YhNwIwDPVpZlTryZQ6F1vj1Q4Xq2z6XjujgBdCHdbgI6XYzTVbP8Gfb6yDRVeRloUFpCA9n9hgrEKMGRZ9pmU/2QXgD4IVkeZNyHR3Pfla3/YRXvJs8helRo/IdDnqvR5JcDqAuhG1JS9pPq7CBHGWM9j5AiSwY4TpnTPALs5Tif8uhv3wQTlLnIce712DjFemCKMlN0qSOrbuvok6Q4WJFfvWbX80WbnjCmzgpcrPB0VXh2VK6/5GOTd9tNBPxaHKfZS5YHkAH5ko9PNSARlqgvR/jMe8TOVprnSf7tuTofSWoQgu+r+GOAMXT28AFM9jEGlNgHZNiDyfGa5ccDaSZWL3b33ROY6JGHrqrnZfOP1eT02iTL1wOTfZjsYQ+wL2ATTKCtEY1/O2EVP2E103xY7YY2CkluZc4nHMOxmgxOp+usJUoztBLhOdxrU/2QXpgKCA2N+eYEB7yfI/TxiwZL7eBWLvLfJugbHdfOU6K17JynYe/KOieK5znU8NCAxT/s07inQNohNJbnmRaBdpeIz+MzHdzCpRZnjnoR10yjcSVur0PWt5RdLoTpFLfQsNsSq79gkG+utB/i5UOJoIC27+PG7o23dn9zJS6I4sWYBcfVFRUcrZ6vxCw4yivqD+NabWms3rIvR7xlHye078sWDXpvZTkVrncDPUhOu6BdQwNiOKw0St/4WN06xOoP40Sb7nPUb0ccUCb5v+9p99f6c+vmjIuLk3ptTEjb3wYBj2mrV3FK+1Djla1vGdbqRdu1j7o9/F12/h8TB8xJk2exoQAAAABJRU5ErkJggg==",alt:"LOG IN with EVE Online"})})}),Object(Fe.jsxs)("p",{children:["You first need a"," ",Object(Fe.jsx)("a",{href:"https://account.bravecollective.com/",target:"_blank",rel:"noreferrer",children:"BRAVE Core Service Account"})," ","to log in here."]})]}),Object(Fe.jsx)(Je.a,{sm:5,children:Object(Fe.jsx)("img",{src:ct,alt:"Logo",className:"img-fluid"})})]}),Object(Fe.jsx)("div",{style:{flex:"66%"}})]})}var lt=n(152),ot=n(159),ut=n(153);n(131);function dt(e){var t,n,r,i,c,s,o=e.show,u=e.template,d=e.onSave,j=e.onCancel,b=e.onDelete,h=Object(a.useState)({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1}),O=Object(A.a)(h,2),m=O[0],f=O[1];Object(a.useEffect)((function(){return f(u?Object(ue.a)({},u):{name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1})}),[u]);var p=m.name.length>0&&m.slackChannelId.length>0,v=y(),x=N(),g=(null!==(t=null===(n=x.data)||void 0===n?void 0:n.neucoreGroups)&&void 0!==t?t:[]).filter((function(e){return!m.allowedNeucoreGroups.includes(e.name)})),w="number"!==typeof(null===u||void 0===u?void 0:u.id),C=!w&&["Last edited by ".concat(null!==(r=null===u||void 0===u?void 0:u.updatedBy)&&void 0!==r?r:"unknown"),(null===u||void 0===u?void 0:u.updatedAt)?"at ".concat(F()(u.updatedAt).format("llll")," (").concat(F()(u.updatedAt).fromNow(),")"):"unknown"].join(" "),k=function(e,t){f((function(n){return Object(ue.a)(Object(ue.a)({},n),{},Object(l.a)({},e,t))}))},S=Object(a.useState)(!1),T=Object(A.a)(S,2),P=T[0],M=T[1];return Object(Fe.jsxs)(He.a,{show:o,size:"lg",backdrop:"static",children:[Object(Fe.jsx)(He.a.Header,{children:Object(Fe.jsxs)(He.a.Title,{children:[w?"Add":"Edit"," Ping Template"]})}),Object(Fe.jsx)(He.a.Body,{children:Object(Fe.jsx)(ot.a,{children:Object(Fe.jsxs)(Qe.a,{children:[C&&Object(Fe.jsx)(Je.a,{xs:12,className:"mb-3",children:C}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"name",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Template Name"}),Object(Fe.jsx)(ot.a.Control,{type:"text",value:m.name,onChange:function(e){return k("name",e.target.value)}})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"slackChannel",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Targeted Slack Channel"}),Object(Fe.jsxs)(ot.a.Select,{value:m.slackChannelId,onChange:function(e){return f((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{slackChannelId:e.target.value})}))},children:[v.isLoading&&Object(Fe.jsx)("option",{value:"",children:"Loading\u2026"}),!v.isLoading&&((null!==(i=null===(c=v.data)||void 0===c?void 0:c.channels.length)&&void 0!==i?i:0)<1?Object(Fe.jsx)("option",{value:"",children:"No valid target channels!"}):Object(Fe.jsx)("option",{value:"",children:"(Please Select)"})),!v.isLoading&&(null===(s=v.data)||void 0===s?void 0:s.channels.map((function(e){return Object(Fe.jsx)("option",{value:e.id,children:e.name},e.id)})))]})]}),Object(Fe.jsx)(ot.a.Group,{as:Je.a,controlId:"allowScheduling",xs:12,className:"mb-3",children:Object(Fe.jsx)(ot.a.Check,{checked:!!m.allowScheduling,onChange:function(){return k("allowScheduling",!m.allowScheduling)},label:Object(Fe.jsxs)(Fe.Fragment,{children:["Allow Showing the Ping in the Calendar",Object(Fe.jsx)("span",{className:"d-block",style:{fontSize:"0.9rem"},children:"Only users with permissions to view pings sent to the target channel will be able to see them in the calendar."})]})})}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"addNeucoreGroup",xs:12,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Neucore Groups Allowed to Ping"}),Object(Fe.jsxs)(lt.a,{variant:"dark",children:[Object(Fe.jsx)("thead",{children:Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("th",{style:{width:"100%"},children:"Group"}),Object(Fe.jsx)("th",{children:"Action"})]})}),Object(Fe.jsxs)("tbody",{children:[0===m.allowedNeucoreGroups.length&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:Object(Fe.jsxs)(ut.a,{variant:"warning",className:"mb-0 p-1",children:[Object(Fe.jsx)("i",{className:"bi-exclamation-triangle"})," ","All users allowed to ping can use this template"]})})}),m.allowedNeucoreGroups.map((function(e){return Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("td",{className:"align-middle",children:e}),Object(Fe.jsx)("td",{children:Object(Fe.jsxs)(Re.a,{size:"sm",onClick:function(){return t=e,f((function(e){return Object(ue.a)(Object(ue.a)({},e),{},{allowedNeucoreGroups:e.allowedNeucoreGroups.filter((function(e){return e!==t}))})}));var t},className:"text-nowrap",children:[Object(Fe.jsx)("i",{className:"bi-trash-fill"})," Remove"]})})]},e)})),x.isLoading&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:"Loading\u2026"})}),!x.isLoading&&g.length<1&&m.allowedNeucoreGroups.length<1&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:Object(Fe.jsx)(ut.a,{variant:"Error",children:"No Neucore groups configured!"})})}),g.length>0&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:Object(Fe.jsxs)(ot.a.Select,{value:"",onChange:function(e){return f((function(t){return Object(ue.a)(Object(ue.a)({},t),{},{allowedNeucoreGroups:[].concat(Object(L.a)(t.allowedNeucoreGroups),[e.target.value])})}))},children:[Object(Fe.jsx)("option",{value:"",children:"(Select a group to add)"}),!x.isLoading&&g.map((function(e){return Object(Fe.jsx)("option",{value:e.name,children:e.name},e.id)}))]})})})]})]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"template",xs:12,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Template Text"}),Object(Fe.jsx)(ot.a.Control,{as:"textarea",rows:10,value:m.template,onChange:function(e){return k("template",e.target.value)}})]})]})})}),Object(Fe.jsxs)(He.a.Footer,{className:"edit-ping-template-dialog-footer",children:[Object(Fe.jsxs)("div",{className:Object(ze.a)("edit-ping-template-dialog-buttons-wrapper",P&&"hidden"),children:[!w&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Re.a,{variant:"danger",disabled:P,onClick:function(){return M(!0)},children:"Delete"}),Object(Fe.jsx)("div",{className:"edit-ping-template-dialog-buttons-spacer"})]}),Object(Fe.jsx)(Re.a,{variant:"secondary",onClick:j,disabled:P,children:"Cancel"}),Object(Fe.jsx)(Re.a,{variant:"primary",disabled:!p||P,onClick:function(){p&&d&&(d(m),f({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1}))},children:"Save"})]}),!w&&Object(Fe.jsxs)("div",{className:Object(ze.a)("edit-ping-template-confirm-delete-buttons-wrapper",!P&&"hidden"),children:[Object(Fe.jsx)(Re.a,{disabled:!P,onClick:function(){return M(!1)},children:"No"}),Object(Fe.jsx)("div",{className:"edit-ping-template-dialog-buttons-spacer",children:"Are you sure you want to delete this ping template?"}),Object(Fe.jsx)(Re.a,{variant:"danger",disabled:!P,onClick:function(){M(!1),null===b||void 0===b||b(),f({name:"",slackChannelId:"",template:"",allowedNeucoreGroups:[],allowScheduling:!1})},children:"Yes"})]})]})]})}n(82);function jt(){var e,t,n,i=w(),c=C(),s=Object(A.a)(c,1)[0],l=k(),o=Object(A.a)(l,1)[0],u=S(),d=Object(A.a)(u,1)[0],j=Object(a.useState)({template:null,show:!1}),b=Object(A.a)(j,2),h=b[0],O=b[1],m=function(){return O({template:null,show:!1})},f=Object(De.j)().url.split("/").slice(0,-1).join("/");return Object(Fe.jsxs)(Ge.a,{children:[Object(Fe.jsxs)("div",{className:"pings-header",children:[Object(Fe.jsx)("h3",{children:"Manage Ping Templates"}),Object(Fe.jsx)("div",{style:{flex:1}}),Object(Fe.jsxs)(Ue.b,{to:f,className:"btn btn-primary",role:"button",children:[Object(Fe.jsx)("i",{className:"bi-arrow-left"})," Back to Pings"]}),Object(Fe.jsxs)(Re.a,{onClick:function(){return O({template:null,show:!0})},children:[Object(Fe.jsx)("i",{className:"bi-plus-lg"})," Add Ping Template"]})]}),Object(Fe.jsxs)(lt.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,children:[Object(Fe.jsx)("thead",{children:Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("th",{children:"Name"}),Object(Fe.jsx)("th",{children:"Targeted Channel"}),Object(Fe.jsx)("th",{children:"Groups Allowed to Ping"}),Object(Fe.jsx)("th",{children:"Calendar Support"}),Object(Fe.jsx)("th",{children:"Template"}),Object(Fe.jsx)("th",{children:"Action"})]})}),Object(Fe.jsxs)("tbody",{children:[i.isFetching&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:5,children:"Loading&elipsis;"})}),!i.isFetching&&(null!==(e=null===(t=i.data)||void 0===t?void 0:t.templates.length)&&void 0!==e?e:0)<1&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:5,children:"No ping templates defined"})}),null===(n=i.data)||void 0===n?void 0:n.templates.map((function(e){return Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("th",{scope:"row",children:e.name}),Object(Fe.jsx)("td",{children:e.slackChannelName}),Object(Fe.jsx)("td",{children:e.allowedNeucoreGroups.length<1?Object(Fe.jsx)("i",{children:"(Everyone)"}):e.allowedNeucoreGroups.join(", ")}),Object(Fe.jsx)("td",{children:e.allowScheduling?"Yes":"No"}),Object(Fe.jsx)("td",{children:e.template.split("\n").map((function(e,t){return Object(Fe.jsxs)(r.a.Fragment,{children:[e,Object(Fe.jsx)("br",{})]},t)}))}),Object(Fe.jsx)("td",{children:Object(Fe.jsxs)(Re.a,{size:"sm",onClick:function(){return O({template:e,show:!0})},children:[Object(Fe.jsx)("i",{className:"bi-pencil"})," Edit"]})})]},e.id)}))]})]}),Object(Fe.jsx)(dt,{show:h.show,template:h.template,onCancel:m,onSave:function(e){h.template?o({id:h.template.id,template:e}):s(e),m()},onDelete:function(){var e=h.template;e&&(d(e.id),m())}})]})}var bt=n(162),ht=n(156),Ot=n(154),mt=n(155),ft=["value","onChange"];function pt(e){var t=e.value,n=e.onChange,r=Object(d.a)(e,ft),i="YYYY-MM-DD",c="HH:mm",s="1970-01-01",l=Object(a.useState)(""),o=Object(A.a)(l,2),u=o[0],j=o[1],b=Object(a.useState)(""),h=Object(A.a)(b,2),O=h[0],m=h[1];Object(a.useEffect)((function(){var e=F.a.utc(t),n=F.a.utc("".concat(u,"T").concat(O));e.isSame(n)||(j(e.format(i)),m(e.format(c)))}),[t]);var f=function(e,t){var n=F.a.utc(e),a=F.a.duration(F.a.utc("".concat(s,"T").concat(t)).diff(F.a.utc(s)));return n.add(a)},p=function(){var e=f(u,O);e.isValid()||(e=F()(t)),j(e.format(i)),m(e.format(c))};return Object(Fe.jsxs)(Qe.a,Object(ue.a)(Object(ue.a)({},r),{},{children:[Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"date",xs:6,className:"mb-3",children:[Object(Fe.jsxs)(ot.a.Label,{className:"text-nowrap",children:["Date (",i,")"]}),Object(Fe.jsx)(ot.a.Control,{type:"date",value:u,pattern:"^[0-9]{4}-[0-9]{2}-[0-9]{2}$",onChange:function(e){var t=e.target.value;if(j(t),F.a.utc(t).isValid()){var a=f(t,O);a.isValid()&&n(a)}},onBlur:p})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"time",xs:6,className:"mb-3",children:[Object(Fe.jsxs)(ot.a.Label,{className:"text-nowrap",children:["Time (",c,")"]}),Object(Fe.jsx)(ot.a.Control,{type:"text",maxLength:5,pattern:"^[0-9]{2}:[0-9]{2}$",value:O,onChange:function(e){var t=e.target.value;if(m(t),F.a.utc("".concat(s,"T").concat(t)).isValid()){var a=f(u,t);a.isValid()&&n(a)}},onBlur:p})]})]}))}var vt=["value","onChange","durationComponents"],xt=[{label:"Days",unit:"days",format:function(e){return 0|e.asDays()}},{label:"Hours",unit:"hours",format:"HH"},{label:"Minutes",unit:"minutes",format:"mm"}];function gt(e){var t=e.value,n=e.onChange,r=e.durationComponents,i=void 0===r?xt:r,c=Object(d.a)(e,vt),s=function(e){return F.a.duration(Object.fromEntries(i.map((function(t,n){var a=t.unit,r=parseInt(e[n],10);return[a,isFinite(r)?r:0]}))))},l=function(e){return i.map((function(t){var n=t.format;return"function"===typeof n?"".concat(n(e)):F.a.duration(e.asMilliseconds(),"milliseconds").format(n)}))},o=Object(a.useState)(l(t)),u=Object(A.a)(o,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var e=l(s(j)),n=l(t);e.some((function(e,t){return e!==n[t]}))&&b(l(t))}),[t]);var h=function(e,t){var a=j.map((function(n,a){return a===e?t:n}));b(a),n(s(a))},O=function(){b(l(t))};return Object(Fe.jsx)(Qe.a,Object(ue.a)(Object(ue.a)({},c),{},{children:i.map((function(e,t){var n=e.label;return Object(Fe.jsxs)(ot.a.Group,{as:Je.a,xs:12/i.length,children:[Object(Fe.jsx)(ot.a.Label,{children:n}),Object(Fe.jsx)(ot.a.Control,{type:"number",pattern:"^-?[0-9]*$",value:j[t],onChange:function(e){return h(t,e.target.value)},onBlur:O})]},n)}))}))}function yt(e){var t=e.time,n=Object(a.useState)(t),r=Object(A.a)(n,2),i=r[0],c=r[1];Object(a.useEffect)((function(){return c(t)}),[t]);var s=Object(a.useCallback)((function(e){c((function(t){return"absolute"===e&&"relative"in t?{absolute:F()().add(t.relative).utc()}:"relative"===e&&"absolute"in t?{relative:F.a.duration(t.absolute.diff(F()()))}:t}))}),[]),l=Object(a.useCallback)((function(e){return c({absolute:e})}),[]),o=Object(a.useCallback)((function(e){return c({relative:e})}),[]),u=Object(a.useState)(Nt(i)),d=Object(A.a)(u,2),j=d[0],b=d[1];return Object(a.useEffect)((function(){var e=function(){return b(Nt(i))},t=setInterval(e,1e3);return e(),function(){return clearInterval(t)}}),[i]),Object(ue.a)(Object(ue.a)({},j),{},{handleChangeInputMode:s,inputMode:"absolute"in i?"absolute":"relative",handleAbsoluteDateChange:l,handleRelativeDateChange:o})}function Nt(e){return{absoluteTime:"absolute"in e?e.absolute:F()().add(e.relative).utc(),relativeTime:"relative"in e?e.relative:F.a.duration(e.absolute.diff(F()()))}}n(132);function wt(){var e,t,n,r=O(),i=(null===(e=r.data)||void 0===e?void 0:e.isLoggedIn)&&r.data.character.roles.includes(I.UserRoles.PING_TEMPLATES_WRITE),c=w(),s=g(),l=Object(A.a)(s,2),o=l[0],u=l[1],d=Object(a.useState)(!1),j=Object(A.a)(d,2),b=j[0],h=j[1],m=yt(Object(a.useMemo)((function(){return{time:{relative:F.a.duration(0)}}}),[])),f=Object(a.useState)(""),p=Object(A.a)(f,2),v=p[0],x=p[1],y=Object(a.useState)(null),N=Object(A.a)(y,2),C=N[0],k=N[1],S=Object(a.useState)(""),T=Object(A.a)(S,2),P=T[0],M=T[1],E=Object(a.useState)(!1),G=Object(A.a)(E,2),R=G[0],D=G[1],B="\n\n--- old text ---\n\n",U=Object(a.useState)(!1),Y=Object(A.a)(U,2),q=Y[0],z=Y[1],V=Object(a.useState)(!1),H=Object(A.a)(V,2),Q=H[0],J=H[1];Object(a.useEffect)((function(){!q||Q||u.isLoading||(J(!0),setTimeout((function(){z(!1),J(!1)}),2e3),D(!u.isSuccess))}),[u.isLoading,u.isSuccess,Q,q]);var _=C&&P!==(null===C||void 0===C?void 0:C.template)&&""!==P&&-1===P.indexOf(B)&&(!b||!!v),K=Object(a.useRef)(null),W=function(e){return function(t){if(t.preventDefault(),K.current&&C){var n=K.current,a=n.selectionStart,r=n.selectionEnd,i=[P.substring(0,a),"{{".concat(e,"}}"),P.substring(r)].join("");M(i),setTimeout((function(){var t,n=a+e.length+4;null===(t=K.current)||void 0===t||t.setSelectionRange(n,n)}))}}},X=(null===(t=r.data)||void 0===t?void 0:t.isLoggedIn)&&r.data.character.name,Z=[].concat(Object(L.a)(C?[{placeholder:"me",description:"the name of the character you are logged in with (".concat(X,")")}]:[]),Object(L.a)((null===C||void 0===C?void 0:C.allowScheduling)&&b?[{placeholder:"title",description:"the title of the calendar entry".concat(v&&" (".concat(v,")"))},{placeholder:"time",description:Object(Fe.jsxs)(Fe.Fragment,{children:["a ",Object(Fe.jsx)("a",{href:"https://time.nakamura-labs.com/",target:"_blank",rel:"noreferrer",children:"Nakamura time link"})," for the calendar entry's time and date (",Object(Fe.jsx)(Ve,{time:m.absoluteTime,asLink:!0,format:"YYYY-MM-DD HH:mm"}),")"]})}]:[])),$=Object(De.j)().url;return Object(Fe.jsxs)(Ge.a,{className:"h-100 mh-100 d-flex flex-column send-pings",children:[Object(Fe.jsx)(De.a,{when:R,message:"You haven't sent your ping yet. Are you sure you want to leave?"}),Object(Fe.jsxs)("div",{className:"pings-header",children:[Object(Fe.jsx)("h3",{children:"Send Pings"}),Object(Fe.jsx)(Ue.b,{to:"".concat($,"/sent"),className:"btn btn-primary",role:"button",children:"Show Sent Pings"}),Object(Fe.jsx)("div",{style:{flex:1}}),i&&Object(Fe.jsxs)(Ue.b,{to:"".concat($,"/templates"),className:"btn btn-primary",role:"button",children:[Object(Fe.jsx)("i",{className:"bi-wrench"})," Manage Ping Templates"]})]}),Object(Fe.jsxs)(ut.a,{variant:"warning",className:"py-2",children:[Object(Fe.jsx)("i",{className:"bi-exclamation-triangle"})," ","If you send ",Object(Fe.jsx)("b",{children:"bad pings"})," you ",Object(Fe.jsx)("b",{children:"will be banned from sending pings"}),". Use the template, if possible. Also, ",Object(Fe.jsx)("b",{children:"don't spam newlines and emoji in your pings or you'll have your ping rights revoked"}),". Make sure you send your pings to the correct group. Some groups are meant for emergencies, don't randomly ping them. Just use it responsibly."]}),Object(Fe.jsxs)(ot.a,{as:Qe.a,className:"pings-container",children:[Object(Fe.jsxs)(ot.a.Group,{as:Je.a,xs:12,md:4,className:"mb-3 pb-3 template-column",children:[Object(Fe.jsx)(ot.a.Label,{children:"Send Ping to Group:"}),Object(Fe.jsx)(bt.a,{className:"templates",children:null===(n=c.data)||void 0===n?void 0:n.templates.map((function(e){return Object(Fe.jsxs)(bt.a.Item,{type:"button",action:!0,active:e===C,onClick:function(){return function(e){if(k(null!==e&&void 0!==e?e:null),e){var t=P.split(B,2),n=Object(A.a)(t,2),a=n[0],r=n[1];a===(null===C||void 0===C?void 0:C.template)||""===a?r?(M(e.template+B+r),D(!0)):(M(e.template),D(!1)):a!==e.template?(M(e.template+B+a),D(!0)):(M(e.template),D(!1))}}(e)},children:[e.name," (#",e.slackChannelName,")"]},e.id)}))})]}),Object(Fe.jsxs)(Je.a,{xs:12,md:8,className:"pb-3 ping-column",children:[!!(null===C||void 0===C?void 0:C.allowScheduling)&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"schedule",xs:12,className:"mb-3 pe-0",children:[Object(Fe.jsx)(ot.a.Label,{children:"Ping Options"}),Object(Fe.jsx)(ot.a.Check,{checked:b,onChange:function(){return h((function(e){return!e}))},label:"Add this Ping to the Calendar"})]}),b&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlid:"calendarTitle",xs:12,className:"mb-3 pe-0",children:[Object(Fe.jsx)(ot.a.Label,{children:"Calendar Entry Title"}),Object(Fe.jsx)(ot.a.Control,{value:v,onChange:function(e){return x(e.target.value)}})]}),Object(Fe.jsxs)(Qe.a,{className:"me-0",children:[Object(Fe.jsx)(Je.a,{xs:12,className:"pe-0",children:Object(Fe.jsx)(ot.a.Label,{children:"Calendar Time"})}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"eveDateTime",xs:12,lg:6,className:"pe-0",children:[Object(Fe.jsx)(ot.a.Label,{children:Object(Fe.jsx)(ot.a.Check,{inline:!0,label:"Use EVE Date and Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return m.handleChangeInputMode("absolute")},id:"absolute",checked:"absolute"===m.inputMode})}),Object(Fe.jsx)(pt,{value:m.absoluteTime,onChange:m.handleAbsoluteDateChange,className:Object(ze.a)("time-mode-input","absolute"!==m.inputMode&&"inactive-time-mode")})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"relativeTime",xs:12,lg:6,className:"mb-3 me-0",children:[Object(Fe.jsx)(ot.a.Label,{children:Object(Fe.jsx)(ot.a.Check,{inline:!0,label:"Use Relative Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return m.handleChangeInputMode("relative")},id:"relative",checked:"relative"===m.inputMode})}),Object(Fe.jsx)(gt,{value:m.relativeTime,onChange:m.handleRelativeDateChange,className:Object(ze.a)("me-n4","time-mode-input","relative"!==m.inputMode&&"inactive-time-mode")})]})]})]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,xs:12,className:"mb-3 pe-0 ping",children:[Z.length>0&&Object(Fe.jsxs)(ut.a,{variant:"info",className:"py-1",children:[Object(Fe.jsx)("i",{className:"bi-info-circle"})," ","There are a few placeholders available that will be replaced when sending the ping:",Object(Fe.jsx)("ul",{className:"mb-0",children:Z.map((function(e){var t=e.placeholder,n=e.description;return Object(Fe.jsxs)("li",{children:[Object(Fe.jsx)(ht.a,{placement:"bottom",delay:{show:250,hide:0},overlay:Object(Fe.jsx)(Ot.a,{children:"Click to insert the placeholder at the cursor position"}),children:Object(Fe.jsx)("code",{onMouseDown:W(t),role:"button",children:"{{".concat(t,"}}")})})," \u2192 ",n]},t)}))})]}),Object(Fe.jsx)(ot.a.Label,{children:"Ping Text:"}),Object(Fe.jsx)(ot.a.Control,{ref:K,as:"textarea",className:"ping-text",disabled:!C,placeholder:C?"":"Please select a channel first.",value:C?P:"",onChange:function(e){M(e.target.value),D(!0)}})]}),Object(Fe.jsx)(Je.a,{xs:12,className:"d-flex justify-content-end pe-0",children:Object(Fe.jsx)(Re.a,{variant:"primary",disabled:!_,onClick:function(){_&&C&&P&&(o(Object(ue.a)({templateId:C.id,text:P},C.allowScheduling&&b?{scheduledTitle:v,scheduledFor:m.absoluteTime.toISOString()}:{})),z(!0))},children:"Send Ping"})})]}),Object(Fe.jsx)(He.a,{show:q,size:"sm",backdrop:"static",children:Object(Fe.jsxs)(He.a.Body,{className:"fs-5",children:[u.isLoading&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(mt.a,{animation:"border",role:"status",size:"sm",children:Object(Fe.jsx)("span",{className:"visually-hidden",children:"Sending\u2026"})})," ","Sending\u2026"]}),!u.isLoading&&u.isError&&Object(Fe.jsxs)("span",{className:"text-danger",children:[Object(Fe.jsx)("i",{className:"bi-exclamation-circle"})," Failed to send ping"]}),!u.isLoading&&u.isSuccess&&Object(Fe.jsxs)("span",{className:"text-success",children:[Object(Fe.jsx)("i",{className:"bi-check-circle"})," Ping sent"]})]})})]})]})}var Ct=["ping"];function kt(e){var t=e.ping,n=Object(d.a)(e,Ct);return Object(Fe.jsxs)(He.a,Object(ue.a)(Object(ue.a)({},n),{},{children:[Object(Fe.jsx)(He.a.Header,{closeButton:!0,children:Object(Fe.jsxs)(He.a.Title,{children:[Object(Fe.jsx)("i",{className:"bi-broadcast-pin"})," ",(null===t||void 0===t?void 0:t.scheduledTitle)||"".concat(null===t||void 0===t?void 0:t.author," to ").concat(null===t||void 0===t?void 0:t.slackChannelName),Object(Fe.jsxs)("h6",{className:"m-0",children:[(null===t||void 0===t?void 0:t.scheduledFor)&&"Scheduled/Pre-","Ping"]})]})}),Object(Fe.jsx)(He.a.Body,{children:t&&Object(Fe.jsx)(Ze,{ping:t})})]}))}n(133);function St(){var e,t,n,r=O(),i=(null===(e=r.data)||void 0===e?void 0:e.isLoggedIn)&&(null===(t=r.data)||void 0===t?void 0:t.character.roles.includes(I.UserRoles.PING)),c=(null===(n=r.data)||void 0===n?void 0:n.isLoggedIn)&&r.data.character.roles.includes(I.UserRoles.PING_TEMPLATES_WRITE),s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skip,t=Ye(),n=qe(Se),r=qe(Pe),i=qe(Te),c=function(){return t(Ne())},s=function(){return t(ye())};return Object(a.useEffect)((function(){!0!==e&&t(ye())}),[t,e]),{pings:n,loading:r,hasMore:i,loadMore:c,reload:s}}({skip:r.isLoading||!i}),l=Object(a.useState)(!1),o=Object(A.a)(l,2),u=o[0],d=o[1],j=Object(a.useState)(null),b=Object(A.a)(j,2),h=b[0],m=b[1],f=Object(De.j)().url.split("/").slice(0,-1).join("/");return Object(Fe.jsxs)(Ge.a,{children:[Object(Fe.jsxs)("div",{className:"pings-header",children:[Object(Fe.jsx)("h3",{children:"Sent Pings"}),Object(Fe.jsxs)(Re.a,{onClick:s.reload,disabled:s.loading,children:[Object(Fe.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]}),Object(Fe.jsx)("div",{style:{flex:1}}),Object(Fe.jsxs)(Ue.b,{to:f,className:"btn btn-primary",role:"button",children:[Object(Fe.jsx)("i",{className:"bi-arrow-left"})," Back to Pings"]}),c&&Object(Fe.jsxs)(Ue.b,{to:"".concat(f,"/view-access"),className:"btn btn-primary",role:"button",children:[Object(Fe.jsx)("i",{className:"bi-wrench"})," Manage View Access"]})]}),Object(Fe.jsxs)(Qe.a,{children:[Object(Fe.jsx)(Je.a,{xs:12,children:Object(Fe.jsx)(ut.a,{variant:"info",className:"py-2",children:"These Pings were either sent by you, or were sent to channels you have view access to. View access is determined by your Neucore groups, not which Slack channels you are in."})}),Object(Fe.jsxs)(Je.a,{xs:12,children:[Object(Fe.jsxs)(lt.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,className:"sent-pings-table",children:[Object(Fe.jsx)("thead",{children:Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("th",{children:"Author"}),Object(Fe.jsx)("th",{children:"Sent at"}),Object(Fe.jsx)("th",{children:"Sent to"}),Object(Fe.jsx)("th",{children:"Text"})]})}),Object(Fe.jsxs)("tbody",{children:[s.pings.length<1&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:4,children:"No Pings to show"})}),s.pings.map((function(e){return Object(Fe.jsxs)("tr",{onClick:function(){return m(e),void d(!0)},children:[Object(Fe.jsx)("td",{children:e.author}),Object(Fe.jsx)("td",{children:Object(Fe.jsx)(Ve,{time:e.sentAt,format:"YYYY-MM-DD HH:mm"})}),Object(Fe.jsx)("td",{children:e.slackChannelName}),Object(Fe.jsx)("td",{className:"text-cell",children:Object(Fe.jsx)("div",{title:e.text,children:e.text})})]},e.id)}))]})]}),Object(Fe.jsx)(Re.a,{className:"w-100 mb-3",disabled:!s.hasMore||s.loading,onClick:s.loadMore,children:s.loading?"Loading\u2026":s.hasMore?"Load more":"(No more pings)"})]})]}),Object(Fe.jsx)(kt,{show:u,ping:h,onHide:function(){d(!1)},fullscreen:"sm-down"})]})}var Tt=["neucoreGroup"];function Pt(){var e,t,n,r,i,c,s,l=Object(De.j)().url.split("/").slice(0,-1).join("/")+"/sent",o=T(),u=Object(a.useMemo)((function(){var e,t;return(null!==(e=null===(t=o.data)||void 0===t?void 0:t.viewPermissions)&&void 0!==e?e:[]).reduce((function(e,t){var n,a=t.neucoreGroup,r=Object(d.a)(t,Tt);return e.set(a,[].concat(Object(L.a)(null!==(n=e.get(a))&&void 0!==n?n:[]),[r]).sort((function(e,t){return e.slackChannelName.localeCompare(t.slackChannelName)})))}),new Map)}),[null===(e=o.data)||void 0===e?void 0:e.viewPermissions]),j=Object(a.useState)(null),b=Object(A.a)(j,2),h=b[0],O=b[1],m=[].concat(Object(L.a)(u.keys()),Object(L.a)(h&&!u.has(h)?[h]:[])).sort(),f=N(),p=(null!==(t=null===(n=f.data)||void 0===n?void 0:n.neucoreGroups)&&void 0!==t?t:[]).filter((function(e){return!u.has(e.name)&&e.name!==h})).map((function(e){return e.name})),v=y(),x=(null!==(r=null===(i=v.data)||void 0===i?void 0:i.channels)&&void 0!==r?r:[]).filter((function(e){return(h&&u.get(h)||[]).every((function(t){return t.slackChannelName!==e.name}))})),g=P(),w=Object(A.a)(g,2),C=w[0],k=w[1],S=o.isFetching||f.isFetching||v.isFetching||k.isLoading;return Object(Fe.jsxs)(Ge.a,{children:[Object(Fe.jsxs)("div",{className:"pings-header",children:[Object(Fe.jsx)("h3",{children:"Manage Ping View Access"}),Object(Fe.jsx)("div",{style:{flex:1}}),Object(Fe.jsxs)(Ue.b,{to:l,className:"btn btn-primary",role:"button",children:[Object(Fe.jsx)("i",{className:"bi-arrow-left"})," Back to Sent Pings"]})]}),Object(Fe.jsxs)(Qe.a,{children:[Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"neucoreGroup",xs:12,md:4,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Neucore Group"}),m.length<1&&(S?Object(Fe.jsx)(ut.a,{variant:"info",className:"mb-2 py-2",children:"Loading\u2026"}):Object(Fe.jsx)(ut.a,{variant:"warning",className:"mb-2 py-2",children:"No view permissions defined."})),m.length>0&&Object(Fe.jsx)(bt.a,{className:"mb-2",children:m.map((function(e){return Object(Fe.jsx)(bt.a.Item,{type:"button",action:!0,active:e===h,onClick:function(){return O(e)},disabled:S,children:e},e)}))}),Object(Fe.jsxs)(ot.a.Select,{value:null!==h&&void 0!==h?h:"",onChange:function(e){O(e.target.value||null)},disabled:S||p.length<1,children:[S&&Object(Fe.jsx)("option",{value:"",children:"Loading\u2026"}),!S&&(p.length>0?Object(Fe.jsx)("option",{value:"",children:"(Select a group to add)"}):Object(Fe.jsx)("option",{value:"",children:"No more groups to add"})),!S&&p.map((function(e){return Object(Fe.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"slackGroups",xs:12,md:8,children:[Object(Fe.jsx)(ot.a.Label,{children:"Can see pings sent to"}),Object(Fe.jsxs)(lt.a,{variant:"dark",children:[Object(Fe.jsx)("thead",{children:Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("th",{className:"w-100",children:"Slack Channel"}),Object(Fe.jsx)("th",{children:"Action"})]})}),Object(Fe.jsxs)("tbody",{children:[!h&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:"(Please select a group to manage first)"})}),h&&Object(Fe.jsxs)(Fe.Fragment,{children:[!(null===(c=u.get(h))||void 0===c?void 0:c.length)&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:Object(Fe.jsxs)(ut.a,{variant:"info",className:"mb-0 py-2",children:["Members of this group cannot view any"," ","pings other than those they sent themselves."]})})}),null===(s=u.get(h))||void 0===s?void 0:s.map((function(e){return Object(Fe.jsxs)("tr",{children:[Object(Fe.jsx)("td",{className:"align-middle",children:e.slackChannelName}),Object(Fe.jsx)("td",{children:Object(Fe.jsxs)(Re.a,{size:"sm",className:"text-nowrap",onClick:function(){return function(e){var t;h&&C({neucoreGroup:h,allowedSlackChannelIds:(null!==(t=u.get(h))&&void 0!==t?t:[]).map((function(e){return e.slackChannelId})).filter((function(t){return t!==e}))})}(e.slackChannelId)},disabled:S,children:[Object(Fe.jsx)("i",{className:"bi-trash-fill"})," Remove"]})})]},e.slackChannelId)})),x.length>0&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:2,children:Object(Fe.jsxs)(ot.a.Select,{value:"",onChange:function(e){var t;h&&C({neucoreGroup:h,allowedSlackChannelIds:[].concat(Object(L.a)((null!==(t=u.get(h))&&void 0!==t?t:[]).map((function(e){return e.slackChannelId}))),[e.target.value])})},disabled:S,children:[Object(Fe.jsx)("option",{value:"",children:"(Select a channel to add)"}),!S&&x.map((function(e){return Object(Fe.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})})]})]})]})]})]})]})}function Mt(){var e,t,n=O(),a=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&n.data.character.roles.includes(I.UserRoles.PING),r=(null===(t=n.data)||void 0===t?void 0:t.isLoggedIn)&&n.data.character.roles.includes(I.UserRoles.PING_TEMPLATES_WRITE),i=Object(De.j)(),c=i.path,s=i.url;if(!n.isFetching){var l;if(!(null===(l=n.data)||void 0===l?void 0:l.isLoggedIn))return Object(Fe.jsx)(De.b,{to:"/login?postLoginRedirect=".concat(s)});if(!a)return Object(Fe.jsx)(Ge.a,{fluid:!0,children:Object(Fe.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(Fe.jsxs)(De.e,{children:[Object(Fe.jsx)(De.c,{exact:!0,path:c,children:Object(Fe.jsx)(wt,{})}),Object(Fe.jsx)(De.c,{path:"".concat(c,"/sent"),children:Object(Fe.jsx)(St,{})}),r&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(De.c,{path:"".concat(c,"/templates"),children:Object(Fe.jsx)(jt,{})}),Object(Fe.jsx)(De.c,{path:"".concat(c,"/view-access"),children:Object(Fe.jsx)(Pt,{})})]})]})}n(134);var Et=n(97),Lt=n(157),At=["options","resultLimit","optionName","loadingText","searchKeys","value","onChange","renderOption"];function Gt(e){var t=e.options,n=e.resultLimit,r=e.optionName,i=e.loadingText,c=e.searchKeys,s=e.value,l=e.onChange,o=e.renderOption,u=void 0===o?r:o,j=Object(d.a)(e,At),b=Object(a.useState)(""),h=Object(A.a)(b,2),O=h[0],m=h[1],f=Object(a.useState)([]),p=Object(A.a)(f,2),v=p[0],x=p[1],g=Object(a.useState)(0),y=Object(A.a)(g,2),N=y[0],w=y[1],C=Object(a.useState)(!1),k=Object(A.a)(C,2),S=k[0],T=k[1],P=Object(a.useMemo)((function(){return new Et.a(t,{keys:c,distance:10,threshold:.3})}),[t,c]),M=Object(a.useCallback)((function(e){var t=P.search(e);return x("number"===typeof n?t.slice(0,n):t),t}),[P,n]);Object(a.useEffect)((function(){if(!s)return m(""),x([]),void w(0);var e=M(s),t=e.findIndex((function(e){return r(e.item)===s}));t>=0?(m(r(e[t].item)),w(t)):(m(""),w(0))}),[s,P,r,M]);var E=function(e){var t=r(e);m(t);var n=M(t).findIndex((function(e){return r(e.item)===t}));w(Math.max(n,0)),l(e),T(!1)},L=Object(a.useRef)(null),G=Object(a.useRef)(null),I=Object(a.useState)(null),R=Object(A.a)(I,2),D=R[0],F=R[1],B=Object(Lt.a)(L.current,G.current,{placement:"bottom",modifiers:[{name:"flip"}]});return Object(Fe.jsxs)("div",{className:"position-relative",children:[Object(Fe.jsx)(ot.a.Control,Object(ue.a)({ref:L,type:"text",value:O,onChange:function(e){m(e.target.value),M(e.target.value)},onFocus:function(){T(!0)},onBlur:function(){if(v.length>0){if(N>=0&&N<v.length){var e=v[N].item;E(e)}}else m(""),l(null);T(!1)},onKeyDown:function(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){var t="ArrowDown"===e.key?1:-1,n=Math.max(0,Math.min(v.length-1,N+t));w(n),v.length>0&&m(r(v[n].item)),e.preventDefault()}else if("Enter"===e.key){if(N>=0&&N<v.length){var a=v[N].item;E(a)}}else T(!0)}},j)),Object(Fe.jsx)(bt.a,Object(ue.a)(Object(ue.a)({ref:G,className:Object(ze.a)("shadow","w-100",!S&&"invisible"),style:Object(ue.a)(Object(ue.a)({},B.styles.popper),{},{maxHeight:"50vh",overflow:"hidden auto",zIndex:1e3})},B.attributes.popper),{},{children:i?Object(Fe.jsx)(bt.a.Item,{children:i}):v.map((function(e,t){return Object(Fe.jsx)(bt.a.Item,{action:!0,tabIndex:-1,onMouseDown:function(e){return e.preventDefault()},onClick:(a=e.item,function(e){e.preventDefault();var t=v.findIndex((function(e){return e.item===a})),n=Math.max(0,Math.min(v.length-1,t));w(n),v.length>0&&(m(r(a)),E(a))}),ref:(n=t===N,n?function(e){e&&D!==e&&(F(e),e.scrollIntoView({block:"nearest"}))}:function(){}),active:t===N,children:u(e.item)},r(e.item));var n,a}))}))]})}var It=["value","onChange"];function Rt(e){var t,n,r=e.value,i=e.onChange,c=Object(d.a)(e,It),s=x(),l=null!==(t=null===(n=s.data)||void 0===n?void 0:n.solarSystems)&&void 0!==t?t:[],o=Object(a.useMemo)((function(){return[{name:"name",weight:100},{name:"constellation",weight:10},{name:"region",weight:1}]}),[]),u=Object(a.useCallback)((function(e){return"".concat(e.name," (").concat(e.constellation,", ").concat(e.region,")")}),[]),j=Object(a.useCallback)((function(e){return e.name}),[]);return Object(Fe.jsx)(Gt,Object(ue.a)({options:l,optionName:j,loadingText:s.isFetching?Object(Fe.jsx)(Fe.Fragment,{children:"loading\u2026"}):!!s.isError&&"error loading systems",resultLimit:50,searchKeys:o,value:r,onChange:i,renderOption:u},c))}var Dt=["Low","Medium","High","Critical"],Ft=[["TCU","TCU"],["IHub","IHub"],["POS","POS"],["POCO","POCO"],["Raitaru","Raitaru"],["Azbel","Azbel"],["Sotiyo","Sotiyo"],["Athanor","Athanor"],["Tatara","Tatara"],["Astrahus","Astrahus"],["Fortizar","Fortizar"],["Keepstar","Keepstar"],["Pharolynx","Pharolynx Cyno Beacon"],["Tenebrex","Tenebrex Cyno Jammer"],["Ansiblex","Ansiblex Jump Gate"],["other","other"]],Bt=["Anchoring","Shield","Armor","Structure","other"],Ut=["friendly","enemy","neutral","other"],Yt=["No data","Win","Loss"];function qt(e){var t,n,r=e.show,i=e.event,c=e.onSave,s=e.onCancel,o=e.onDelete,u=Object(a.useState)({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""}),d=Object(A.a)(u,2),j=d[0],b=d[1],h=Object(a.useMemo)((function(){return i?{absolute:F.a.utc(i.time)}:{relative:F.a.duration(0)}}),[i]);Object(a.useEffect)((function(){b(i?Object(ue.a)({},i):{system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""})}),[i]);var O=yt({time:h}),m=Object.entries(null!==j&&void 0!==j?j:{}).every((function(e){var t=Object(A.a)(e,2),n=t[0],a=t[1];return"notes"===n||!!a})),f="number"!==typeof(null===i||void 0===i?void 0:i.id),p=!f&&["Last edited by ".concat(null!==(t=null===i||void 0===i?void 0:i.updatedBy)&&void 0!==t?t:"unknown"),(null===i||void 0===i?void 0:i.updatedAt)?"at ".concat(F()(i.updatedAt).format("llll")," (").concat(F()(i.updatedAt).fromNow(),")"):"unknown"].join(" "),v="absolute"===O.inputMode,x=function(e,t){b((function(n){return Object(ue.a)(Object(ue.a)({},n),{},Object(l.a)({},e,t))}))},g=function(e){return function(t){return x(e,t.target.value)}},y=Object(a.useState)(!1),N=Object(A.a)(y,2),w=N[0],C=N[1];return Object(Fe.jsxs)(He.a,{show:r,size:"lg",backdrop:"static",dialogClassName:"edit-event-dialog",children:[Object(Fe.jsx)(He.a.Header,{children:Object(Fe.jsxs)(He.a.Title,{children:[f?"Add":"Edit"," Event"]})}),Object(Fe.jsx)(He.a.Body,{children:Object(Fe.jsx)(ot.a,{children:Object(Fe.jsxs)(Qe.a,{children:[p&&Object(Fe.jsx)(Je.a,{xs:12,className:"mb-3",children:p}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"solarSystem",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Solar System"}),Object(Fe.jsx)(Rt,{value:j.system,onChange:function(e){var t;return x("system",null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"")},placeholder:"e.g. NBPH-N"})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"priority",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Priority"}),Object(Fe.jsxs)(ot.a.Select,{value:j.priority,onChange:g("priority"),children:[Object(Fe.jsx)("option",{value:"",children:"(Please Select)"}),Dt.map((function(e){return Object(Fe.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"structure",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Structure"}),Object(Fe.jsxs)(ot.a.Select,{value:j.structure,onChange:g("structure"),children:[Object(Fe.jsx)("option",{value:"",children:"(Please Select)"}),Ft.map((function(e){var t=Object(A.a)(e,2),n=t[0],a=t[1];return Object(Fe.jsx)("option",{value:n,children:a},n)}))]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"type",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Type"}),Object(Fe.jsxs)(ot.a.Select,{value:j.type,onChange:g("type"),children:[Object(Fe.jsx)("option",{value:"",children:"(Please Select)"}),Bt.map((function(e){return Object(Fe.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"standing",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Standing"}),Object(Fe.jsxs)(ot.a.Select,{value:j.standing,onChange:g("standing"),children:[Object(Fe.jsx)("option",{value:"",children:"(Please Select)"}),Ut.map((function(e){return Object(Fe.jsx)("option",{value:e,children:e},e)}))]})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"result",xs:12,sm:6,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Result"}),Object(Fe.jsx)(ot.a.Select,{value:j.result,onChange:g("result"),children:Yt.map((function(e){return Object(Fe.jsx)("option",{value:e,children:e},e)}))})]}),Object(Fe.jsx)(Je.a,{xs:12,children:Object(Fe.jsx)(ot.a.Label,{children:"Event Time"})}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"eveDateTime",xs:12,lg:6,children:[Object(Fe.jsx)(ot.a.Label,{children:Object(Fe.jsx)(ot.a.Check,{inline:!0,label:"Use EVE Date and Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return O.handleChangeInputMode("absolute")},id:"absolute",checked:v})}),Object(Fe.jsx)(pt,{value:O.absoluteTime,onChange:O.handleAbsoluteDateChange,className:Object(ze.a)("time-mode-input",!v&&"inactive-time-mode")})]}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"relativeTime",xs:12,lg:6,children:[Object(Fe.jsx)(ot.a.Label,{children:Object(Fe.jsx)(ot.a.Check,{inline:!0,label:"Use Relative Time",name:"eveDateTimeMode",type:"radio",onChange:function(){return O.handleChangeInputMode("relative")},id:"relative",checked:!v})}),Object(Fe.jsx)(gt,{value:O.relativeTime,onChange:O.handleRelativeDateChange,className:Object(ze.a)("time-mode-input",v&&"inactive-time-mode")})]}),Object(Fe.jsx)(Je.a,{xs:12,className:"d-block d-lg-none",children:Object(Fe.jsx)("hr",{})}),Object(Fe.jsxs)(ot.a.Group,{as:Je.a,controlId:"notes",xs:12,className:"mb-3",children:[Object(Fe.jsx)(ot.a.Label,{children:"Notes"}),Object(Fe.jsx)(ot.a.Control,{as:"textarea",rows:1,value:null!==(n=null===j||void 0===j?void 0:j.notes)&&void 0!==n?n:"",onChange:function(e){return x("notes",e.target.value)}})]})]})})}),Object(Fe.jsxs)(He.a.Footer,{className:"dialog-footer",children:[Object(Fe.jsxs)("div",{className:Object(ze.a)("dialog-buttons-wrapper",w&&"hidden"),children:[!f&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Re.a,{variant:"danger",disabled:w,onClick:function(){return C(!0)},children:"Delete"}),Object(Fe.jsx)("div",{className:"dialog-buttons-spacer"})]}),Object(Fe.jsx)(Re.a,{variant:"secondary",onClick:s,disabled:w,children:"Cancel"}),Object(Fe.jsx)(Re.a,{variant:"primary",disabled:!m||w,onClick:function(){m&&c&&(c(Object(ue.a)(Object(ue.a)({},j),{},{time:O.absoluteTime.toISOString()})),b({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""}))},children:"Save"})]}),!f&&Object(Fe.jsxs)("div",{className:Object(ze.a)("confirm-delete-buttons-wrapper",!w&&"hidden"),children:[Object(Fe.jsx)(Re.a,{disabled:!w,onClick:function(){return C(!1)},children:"No"}),Object(Fe.jsx)("div",{className:"dialog-buttons-spacer",children:"Are you sure you want to delete the event?"}),Object(Fe.jsx)(Re.a,{variant:"danger",disabled:!w,onClick:function(){C(!1),null===o||void 0===o||o(),b({system:"",priority:"",structure:"",type:"",standing:"",result:"No data",notes:""})},children:"Yes"})]})]})]})}n(135);function zt(e){var t=e.showResultColumn,n=void 0!==t&&t,a=e.canEdit,r=void 0!==a&&a,i=e.onEdit,c=e.events,s=function(e){var t=Date.parse(e.time),n=Date.now();return Math.abs(t-n)<36e5?"present":t>n?"future":"past"};return Object(Fe.jsxs)(lt.a,{hover:!0,size:"sm",variant:"dark",responsive:!0,className:"events-table",children:[Object(Fe.jsx)("thead",{children:Object(Fe.jsxs)("tr",{className:"events-header-row",children:[Object(Fe.jsx)("th",{children:"System"}),Object(Fe.jsx)("th",{children:"Region"}),Object(Fe.jsx)("th",{children:"Priority"}),Object(Fe.jsx)("th",{children:"Structure"}),Object(Fe.jsx)("th",{children:"Type"}),Object(Fe.jsx)("th",{children:"Standing"}),Object(Fe.jsx)("th",{children:"Relative Time"}),Object(Fe.jsx)("th",{children:"Local Time"}),Object(Fe.jsx)("th",{children:"EVE Time"}),n&&Object(Fe.jsx)("th",{children:"Result"}),Object(Fe.jsx)("th",{children:"Notes"}),r&&Object(Fe.jsx)("th",{children:"Action"})]})}),Object(Fe.jsxs)("tbody",{children:[0===c.length&&Object(Fe.jsx)("tr",{children:Object(Fe.jsx)("td",{colSpan:+n+10+ +r,children:"No Events"})}),c.map((function(e){return Object(Fe.jsxs)("tr",{className:Object(ze.a)("event-row",s(e)),children:[Object(Fe.jsx)("th",{scope:"row",children:Object(Fe.jsx)(et,{system:e.system})}),Object(Fe.jsx)("td",{children:Object(Fe.jsx)($e,{system:e.system,region:e.region})}),Object(Fe.jsx)("td",{children:e.priority}),Object(Fe.jsx)("td",{children:e.structure}),Object(Fe.jsx)("td",{children:e.type}),Object(Fe.jsx)("td",{children:e.standing}),Object(Fe.jsx)("td",{children:Object(Fe.jsx)(Ke,{time:e.time})}),Object(Fe.jsx)("td",{children:Object(Fe.jsx)(Ve,{time:e.time})}),Object(Fe.jsx)("td",{children:Object(Fe.jsx)(Ve,{time:F()(e.time).utc(),format:"YYYY-MM-DD HH:mm",asLink:!0})}),n&&Object(Fe.jsx)("td",{children:e.result}),Object(Fe.jsx)("td",{className:"event-notes",children:e.notes}),r&&Object(Fe.jsx)("td",{children:Object(Fe.jsxs)(Re.a,{size:"sm",onClick:function(){return null===i||void 0===i?void 0:i(e)},children:[Object(Fe.jsx)("i",{className:"bi-pencil"})," Edit"]})})]},e.id)}))]})]})}n(136);function Vt(){var e,t,n=O(),r=(null===(e=n.data)||void 0===e?void 0:e.isLoggedIn)&&n.data.character.roles.includes(I.UserRoles.EVENTS_WRITE),i=(null===(t=n.data)||void 0===t?void 0:t.isLoggedIn)&&n.data.character.roles.includes(I.UserRoles.EVENTS_READ),c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skip,t=Ye(),n=qe(me),r=qe(pe),i=qe(fe),c=function(){return t(be())},s=function(){return t(je())};return Object(a.useEffect)((function(){!0!==e&&t(je())}),[t,e]),{events:n,loading:r,hasMoreEvents:i,loadMoreEvents:c,reloadEvents:s}}({skip:n.isLoading||!i}),s=f(),l=Object(A.a)(s,2),o=l[0],u=l[1],d=p(),j=Object(A.a)(d,2),b=j[0],h=j[1],m=v(),x=Object(A.a)(m,2),g=x[0],y=x[1],N=Object(a.useState)(null),w=Object(A.a)(N,2),C=w[0],k=w[1],S=!!C;Object(a.useEffect)((function(){var e;switch(C){case"add":e=u;break;case"edit":e=h;break;case"delete":e=y;break;default:return}e.isLoading||(e.isError&&console.log("An Error occurred trying to",C,"an event",e.error),k(null))}),[u,y,c,C,h]);var T=Object(a.useState)({event:null,show:!1}),P=Object(A.a)(T,2),M=P[0],E=P[1],L=function(){return E({event:null,show:!1})},G=Object(De.j)().url;if(!n.isFetching){var R;if(!(null===(R=n.data)||void 0===R?void 0:R.isLoggedIn))return Object(Fe.jsx)(De.b,{to:"/login?postLoginRedirect=".concat(G)});if(!i)return Object(Fe.jsx)(Ge.a,{fluid:!0,children:Object(Fe.jsx)("h6",{children:"Sorry, you don't have permission to view this page."})})}return Object(Fe.jsxs)(Ge.a,{fluid:!0,children:[Object(Fe.jsxs)("div",{className:"timers-header",children:[Object(Fe.jsx)("h3",{children:"Timers"}),Object(Fe.jsxs)(Re.a,{onClick:c.reloadEvents,disabled:S,children:[Object(Fe.jsx)("i",{className:"bi-arrow-clockwise"})," Reload"]}),Object(Fe.jsx)("div",{style:{flex:1}}),r&&Object(Fe.jsxs)(Re.a,{onClick:function(){return E({event:null,show:!0})},disabled:S,children:[Object(Fe.jsx)("i",{className:"bi-calendar-plus"})," New Event"]})]}),Object(Fe.jsx)(zt,{events:c.events,showResultColumn:!0,canEdit:r,onEdit:function(e){return E({event:e,show:!0})}}),Object(Fe.jsx)(Re.a,{className:"w-100 mb-3",disabled:!c.hasMoreEvents||c.loading||S,onClick:c.loadMoreEvents,children:c.loading?"Loading\u2026":c.hasMoreEvents?"Load more":"(No more events)"}),Object(Fe.jsx)(qt,{show:M.show,event:M.event,onCancel:L,onSave:function(e){M.event?(k("edit"),b({id:M.event.id,event:e})):(k("add"),o(e)),L()},onDelete:function(){var e=M.event;e&&(k("delete"),g(e.id),L())}})]})}n(137);function Ht(){return Object(Fe.jsx)(Ae.a,{variant:"dark",bg:"primary",expand:"lg",children:Object(Fe.jsx)(Ge.a,{children:Object(Fe.jsx)("div",{className:"footer",children:"Brave Collective Services. For support write to support@bravecollective.freshdesk.com or ask in the ingame channel 'Brave IT Team'."})})})}function Qt(){var e=[{href:"/calendar",title:"Calendar",component:it},{href:"/timers",title:"Timers",component:Vt},{href:"/pings",title:"Pings",component:Mt},{href:"/login",component:st}],t=e.filter((function(e){return!!e.title}));return Object(Fe.jsx)(Ue.a,{children:Object(Fe.jsxs)("div",{className:"app-wrapper",children:[Object(Fe.jsx)("header",{children:Object(Fe.jsx)(Be,{pages:t})}),Object(Fe.jsx)("main",{className:"main",children:Object(Fe.jsxs)(De.e,{children:[e.map((function(e){return Object(Fe.jsx)(De.c,{path:e.href,component:e.component},e.href)})),Object(Fe.jsx)(De.b,{from:"/",to:"/calendar"})]})}),Object(Fe.jsx)("footer",{children:Object(Fe.jsx)(Ht,{})})]})})}n(138),n(139);c.a.render(Object(Fe.jsx)(r.a.StrictMode,{children:Object(Fe.jsx)(s.Provider,{store:Le,children:Object(Fe.jsx)(Qt,{})})}),document.getElementById("root"))},23:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(111),t),r(n(119),t),r(n(120),t)},82:function(e,t,n){}},[[140,1,2]]]);
//# sourceMappingURL=main.db1d5cc9.chunk.js.map